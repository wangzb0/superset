"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-pivot-table_src_PivotTableChart_tsx"],{

/***/ "./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This icon file is generated automatically.\nvar MinusSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"minus-square\", \"theme\": \"outlined\" };\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MinusSquareOutlined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9NaW51c1NxdWFyZU91dGxpbmVkLmpzLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zLXN2Zy9lcy9hc24vTWludXNTcXVhcmVPdXRsaW5lZC5qcz85ZGQ0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaWNvbiBmaWxlIGlzIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5LlxudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSB7IFwiaWNvblwiOiB7IFwidGFnXCI6IFwic3ZnXCIsIFwiYXR0cnNcIjogeyBcInZpZXdCb3hcIjogXCI2NCA2NCA4OTYgODk2XCIsIFwiZm9jdXNhYmxlXCI6IFwiZmFsc2VcIiB9LCBcImNoaWxkcmVuXCI6IFt7IFwidGFnXCI6IFwicGF0aFwiLCBcImF0dHJzXCI6IHsgXCJkXCI6IFwiTTMyOCA1NDRoMzY4YzQuNCAwIDgtMy42IDgtOHYtNDhjMC00LjQtMy42LTgtOC04SDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHpcIiB9IH0sIHsgXCJ0YWdcIjogXCJwYXRoXCIsIFwiYXR0cnNcIjogeyBcImRcIjogXCJNODgwIDExMkgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjczNmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg3MzZjMTcuNyAwIDMyLTE0LjMgMzItMzJWMTQ0YzAtMTcuNy0xNC4zLTMyLTMyLTMyem0tNDAgNzI4SDE4NFYxODRoNjU2djY1NnpcIiB9IH1dIH0sIFwibmFtZVwiOiBcIm1pbnVzLXNxdWFyZVwiLCBcInRoZW1lXCI6IFwib3V0bGluZWRcIiB9O1xuZXhwb3J0IGRlZmF1bHQgTWludXNTcXVhcmVPdXRsaW5lZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This icon file is generated automatically.\nvar PlusSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"plus-square\", \"theme\": \"outlined\" };\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PlusSquareOutlined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9QbHVzU3F1YXJlT3V0bGluZWQuanMuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9QbHVzU3F1YXJlT3V0bGluZWQuanM/NWRjOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGljb24gZmlsZSBpcyBnZW5lcmF0ZWQgYXV0b21hdGljYWxseS5cbnZhciBQbHVzU3F1YXJlT3V0bGluZWQgPSB7IFwiaWNvblwiOiB7IFwidGFnXCI6IFwic3ZnXCIsIFwiYXR0cnNcIjogeyBcInZpZXdCb3hcIjogXCI2NCA2NCA4OTYgODk2XCIsIFwiZm9jdXNhYmxlXCI6IFwiZmFsc2VcIiB9LCBcImNoaWxkcmVuXCI6IFt7IFwidGFnXCI6IFwicGF0aFwiLCBcImF0dHJzXCI6IHsgXCJkXCI6IFwiTTMyOCA1NDRoMTUydjE1MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjU0NGgxNTJjNC40IDAgOC0zLjYgOC04di00OGMwLTQuNC0zLjYtOC04LThINTQ0VjMyOGMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh2MTUySDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHpcIiB9IH0sIHsgXCJ0YWdcIjogXCJwYXRoXCIsIFwiYXR0cnNcIjogeyBcImRcIjogXCJNODgwIDExMkgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjczNmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg3MzZjMTcuNyAwIDMyLTE0LjMgMzItMzJWMTQ0YzAtMTcuNy0xNC4zLTMyLTMyLTMyem0tNDAgNzI4SDE4NFYxODRoNjU2djY1NnpcIiB9IH1dIH0sIFwibmFtZVwiOiBcInBsdXMtc3F1YXJlXCIsIFwidGhlbWVcIjogXCJvdXRsaW5lZFwiIH07XG5leHBvcnQgZGVmYXVsdCBQbHVzU3F1YXJlT3V0bGluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/MinusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar MinusSquareOutlined = function MinusSquareOutlined(props, ref) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], Object.assign({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n  }));\n};\n\nMinusSquareOutlined.displayName = 'MinusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(MinusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvTWludXNTcXVhcmVPdXRsaW5lZC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9AYW50LWRlc2lnbi9pY29ucy9lcy9pY29ucy9NaW51c1NxdWFyZU91dGxpbmVkLmpzPzgxNDciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR0VORVJBVEUgQlkgLi9zY3JpcHRzL2dlbmVyYXRlLnRzXG4vLyBET04gTk9UIEVESVQgSVQgTUFOVUFMTFlcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNaW51c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL01pbnVzU3F1YXJlT3V0bGluZWRcIjtcbmltcG9ydCBBbnRkSWNvbiBmcm9tICcuLi9jb21wb25lbnRzL0FudGRJY29uJztcblxudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSBmdW5jdGlvbiBNaW51c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQW50ZEljb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogTWludXNTcXVhcmVPdXRsaW5lZFN2Z1xuICB9KSk7XG59O1xuXG5NaW51c1NxdWFyZU91dGxpbmVkLmRpc3BsYXlOYW1lID0gJ01pbnVzU3F1YXJlT3V0bGluZWQnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuZm9yd2FyZFJlZihNaW51c1NxdWFyZU91dGxpbmVkKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/PlusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], Object.assign({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n  }));\n};\n\nPlusSquareOutlined.displayName = 'PlusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(PlusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zL2VzL2ljb25zL1BsdXNTcXVhcmVPdXRsaW5lZC5qcz9jNDY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdFTkVSQVRFIEJZIC4vc2NyaXB0cy9nZW5lcmF0ZS50c1xuLy8gRE9OIE5PVCBFRElUIElUIE1BTlVBTExZXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUGx1c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL1BsdXNTcXVhcmVPdXRsaW5lZFwiO1xuaW1wb3J0IEFudGRJY29uIGZyb20gJy4uL2NvbXBvbmVudHMvQW50ZEljb24nO1xuXG52YXIgUGx1c1NxdWFyZU91dGxpbmVkID0gZnVuY3Rpb24gUGx1c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQW50ZEljb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogUGx1c1NxdWFyZU91dGxpbmVkU3ZnXG4gIH0pKTtcbn07XG5cblBsdXNTcXVhcmVPdXRsaW5lZC5kaXNwbGF5TmFtZSA9ICdQbHVzU3F1YXJlT3V0bGluZWQnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuZm9yd2FyZFJlZihQbHVzU3F1YXJlT3V0bGluZWQpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx":
/*!******************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx ***!
  \******************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _TableRenderers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableRenderers */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\nclass PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  render() {\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer, this.props);\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nPivotTable.propTypes = _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.propTypes;\nPivotTable.defaultProps = _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.defaultProps;const _default =\n\nPivotTable;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PivotTable, \"PivotTable\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\PivotTable.jsx\");reactHotLoader.register(_default, \"default\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\PivotTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9QaXZvdFRhYmxlLmpzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBTUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvUGl2b3RUYWJsZS5qc3g/OWY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUGl2b3REYXRhIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xyXG5pbXBvcnQgeyBUYWJsZVJlbmRlcmVyIH0gZnJvbSAnLi9UYWJsZVJlbmRlcmVycyc7XHJcblxyXG5jbGFzcyBQaXZvdFRhYmxlIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIDxUYWJsZVJlbmRlcmVyIHsuLi50aGlzLnByb3BzfSAvPjtcclxuICB9XHJcbn1cclxuXHJcblBpdm90VGFibGUucHJvcFR5cGVzID0gUGl2b3REYXRhLnByb3BUeXBlcztcclxuUGl2b3RUYWJsZS5kZWZhdWx0UHJvcHMgPSBQaXZvdERhdGEuZGVmYXVsdFByb3BzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGl2b3RUYWJsZTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js":
/*!*************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js ***!
  \*************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Styles\": () => (/* binding */ Styles)\n/* harmony export */ });\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.styled.div`\n  ${({ theme }) => _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.css`\n    table.pvtTable {\n      position: relative;\n      font-size: ${theme.typography.sizes.s}px;\n      text-align: left;\n      margin: ${theme.gridUnit}px;\n      border-collapse: separate;\n      font-family: ${theme.typography.families.sansSerif};\n      line-height: 1.4;\n    }\n\n    table thead {\n      position: sticky;\n      top: 0;\n    }\n\n    table.pvtTable thead tr th,\n    table.pvtTable tbody tr th {\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      font-size: ${theme.typography.sizes.s}px;\n      padding: ${theme.gridUnit}px;\n      font-weight: ${theme.typography.weights.normal};\n    }\n\n    table.pvtTable tbody tr.pvtRowTotals {\n      position: sticky;\n      bottom: 0;\n    }\n\n    table.pvtTable thead tr:last-of-type th,\n    table.pvtTable thead tr:first-of-type th.pvtTotalLabel,\n    table.pvtTable thead tr:nth-last-of-type(2) th.pvtColLabel,\n    table.pvtTable thead th.pvtSubtotalLabel,\n    table.pvtTable tbody tr:last-of-type th,\n    table.pvtTable tbody tr:last-of-type td {\n      border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      ~ th.pvtColLabel,\n    table.pvtTable tbody tr:first-of-type th,\n    table.pvtTable tbody tr:first-of-type td {\n      border-top: none;\n    }\n\n    table.pvtTable tbody tr td:last-of-type,\n    table.pvtTable thead tr th:last-of-type:not(.pvtSubtotalLabel) {\n      border-right: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      + .pvtTotalLabel {\n      border-right: none;\n    }\n\n    table.pvtTable tr th.active {\n      background-color: ${theme.colors.primary.light3};\n    }\n\n    table.pvtTable .pvtTotalLabel {\n      text-align: right;\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable .pvtSubtotalLabel {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td {\n      color: ${theme.colors.primary.dark2};\n      padding: ${theme.gridUnit}px;\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      vertical-align: top;\n      text-align: right;\n    }\n\n    table.pvtTable tbody tr th.pvtRowLabel {\n      vertical-align: baseline;\n    }\n\n    .pvtTotal,\n    .pvtGrandTotal {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td.pvtRowTotal {\n      vertical-align: middle;\n    }\n\n    .toggle-wrapper {\n      white-space: nowrap;\n    }\n\n    .toggle-wrapper > .toggle-val {\n      white-space: normal;\n    }\n\n    .toggle {\n      padding-right: ${theme.gridUnit}px;\n      cursor: pointer;\n    }\n\n    .hoverable:hover {\n      background-color: ${theme.colors.primary.light4};\n      cursor: pointer;\n    }\n  `}\n`;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\Styles.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LXBpdm90LXRhYmxlL3NyYy9yZWFjdC1waXZvdHRhYmxlL1N0eWxlcy5qcz8wOGFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBjc3MsIHN0eWxlZCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuXHJcbmV4cG9ydCBjb25zdCBTdHlsZXMgPSBzdHlsZWQuZGl2YFxyXG4gICR7KHsgdGhlbWUgfSkgPT4gY3NzYFxyXG4gICAgdGFibGUucHZ0VGFibGUge1xyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XHJcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgIG1hcmdpbjogJHt0aGVtZS5ncmlkVW5pdH1weDtcclxuICAgICAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcclxuICAgICAgZm9udC1mYW1pbHk6ICR7dGhlbWUudHlwb2dyYXBoeS5mYW1pbGllcy5zYW5zU2VyaWZ9O1xyXG4gICAgICBsaW5lLWhlaWdodDogMS40O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlIHRoZWFkIHtcclxuICAgICAgcG9zaXRpb246IHN0aWNreTtcclxuICAgICAgdG9wOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyIHRoLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGgge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQ1fTtcclxuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gICAgICBmb250LXNpemU6ICR7dGhlbWUudHlwb2dyYXBoeS5zaXplcy5zfXB4O1xyXG4gICAgICBwYWRkaW5nOiAke3RoZW1lLmdyaWRVbml0fXB4O1xyXG4gICAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMubm9ybWFsfTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ci5wdnRSb3dUb3RhbHMge1xyXG4gICAgICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gICAgICBib3R0b206IDA7XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHI6bGFzdC1vZi10eXBlIHRoLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHI6Zmlyc3Qtb2YtdHlwZSB0aC5wdnRUb3RhbExhYmVsLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHI6bnRoLWxhc3Qtb2YtdHlwZSgyKSB0aC5wdnRDb2xMYWJlbCxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRoLnB2dFN1YnRvdGFsTGFiZWwsXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpsYXN0LW9mLXR5cGUgdGgsXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpsYXN0LW9mLXR5cGUgdGQge1xyXG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0Mn07XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGVcclxuICAgICAgdGhlYWRcclxuICAgICAgdHI6bGFzdC1vZi10eXBlOm5vdCg6b25seS1jaGlsZClcclxuICAgICAgdGgucHZ0QXhpc0xhYmVsXHJcbiAgICAgIH4gdGgucHZ0Q29sTGFiZWwsXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpmaXJzdC1vZi10eXBlIHRoLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6Zmlyc3Qtb2YtdHlwZSB0ZCB7XHJcbiAgICAgIGJvcmRlci10b3A6IG5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGQ6bGFzdC1vZi10eXBlLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHIgdGg6bGFzdC1vZi10eXBlOm5vdCgucHZ0U3VidG90YWxMYWJlbCkge1xyXG4gICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZVxyXG4gICAgICB0aGVhZFxyXG4gICAgICB0cjpsYXN0LW9mLXR5cGU6bm90KDpvbmx5LWNoaWxkKVxyXG4gICAgICB0aC5wdnRBeGlzTGFiZWxcclxuICAgICAgKyAucHZ0VG90YWxMYWJlbCB7XHJcbiAgICAgIGJvcmRlci1yaWdodDogbm9uZTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0ciB0aC5hY3RpdmUge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LmxpZ2h0M307XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgLnB2dFRvdGFsTGFiZWwge1xyXG4gICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS53ZWlnaHRzLmJvbGR9O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIC5wdnRTdWJ0b3RhbExhYmVsIHtcclxuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS53ZWlnaHRzLmJvbGR9O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyIHRkIHtcclxuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9O1xyXG4gICAgICBwYWRkaW5nOiAke3RoZW1lLmdyaWRVbml0fXB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQ1fTtcclxuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0aC5wdnRSb3dMYWJlbCB7XHJcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcclxuICAgIH1cclxuXHJcbiAgICAucHZ0VG90YWwsXHJcbiAgICAucHZ0R3JhbmRUb3RhbCB7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0ZC5wdnRSb3dUb3RhbCB7XHJcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLnRvZ2dsZS13cmFwcGVyIHtcclxuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgIH1cclxuXHJcbiAgICAudG9nZ2xlLXdyYXBwZXIgPiAudG9nZ2xlLXZhbCB7XHJcbiAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLnRvZ2dsZSB7XHJcbiAgICAgIHBhZGRpbmctcmlnaHQ6ICR7dGhlbWUuZ3JpZFVuaXR9cHg7XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIH1cclxuXHJcbiAgICAuaG92ZXJhYmxlOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeS5saWdodDR9O1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB9XHJcbiAgYH1cclxuYDtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx":
/*!**********************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx ***!
  \**********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TableRenderer\": () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _Styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Styles */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\n\nconst parseLabel = (value) => {\n  if (typeof value === 'number' || typeof value === 'string') {\n    return value;\n  }\n  return String(value);\n};\n\nfunction displayHeaderCell(\nneedToggle,\nArrowIcon,\nonArrowClick,\nvalue,\nnamesMapping)\n{\n  const name = namesMapping[value] || value;\n  return needToggle ?\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"toggle-wrapper\" },\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", {\n    role: \"button\",\n    tabIndex: \"0\",\n    className: \"toggle\",\n    onClick: onArrowClick },\n\n  ArrowIcon),\n\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"toggle-val\" }, parseLabel(name))) :\n\n\n  parseLabel(name);\n\n}\n\nclass TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n\n    // We need state to record which entries are collapsed and which aren't.\n    // This is an object with flat-keys indicating if the corresponding rows\n    // should be collapsed.\n    this.state = { collapsedRows: {}, collapsedCols: {} };\n\n    this.clickHeaderHandler = this.clickHeaderHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  getBasePivotSettings() {\n    // One-time extraction of pivot settings that we'll use throughout the render.\n\n    const { props } = this;\n    const colAttrs = props.cols;\n    const rowAttrs = props.rows;\n\n    const tableOptions = {\n      rowTotals: true,\n      colTotals: true,\n      ...props.tableOptions };\n\n    const rowTotals = tableOptions.rowTotals || colAttrs.length === 0;\n    const colTotals = tableOptions.colTotals || rowAttrs.length === 0;\n\n    const namesMapping = props.namesMapping || {};\n    const subtotalOptions = {\n      arrowCollapsed: '\\u25B2',\n      arrowExpanded: '\\u25BC',\n      ...props.subtotalOptions };\n\n\n    const colSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: rowTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.colSubtotalDisplay };\n\n\n    const rowSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: colTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.rowSubtotalDisplay };\n\n\n    const pivotData = new _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData(props, {\n      rowEnabled: rowSubtotalDisplay.enabled,\n      colEnabled: colSubtotalDisplay.enabled,\n      rowPartialOnTop: rowSubtotalDisplay.displayOnTop,\n      colPartialOnTop: colSubtotalDisplay.displayOnTop });\n\n    const rowKeys = pivotData.getRowKeys();\n    const colKeys = pivotData.getColKeys();\n\n    // Also pre-calculate all the callbacks for cells, etc... This is nice to have to\n    // avoid re-calculations of the call-backs on cell expansions, etc...\n    const cellCallbacks = {};\n    const rowTotalCallbacks = {};\n    const colTotalCallbacks = {};\n    let grandTotalCallback = null;\n    if (tableOptions.clickCallback) {\n      rowKeys.forEach((rowKey) => {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n        if (!(flatRowKey in cellCallbacks)) {\n          cellCallbacks[flatRowKey] = {};\n        }\n        colKeys.forEach((colKey) => {\n          cellCallbacks[flatRowKey][(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n          pivotData,\n          rowKey,\n          colKey);\n\n        });\n      });\n\n      // Add in totals as well.\n      if (rowTotals) {\n        rowKeys.forEach((rowKey) => {\n          rowTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey)] = this.clickHandler(\n          pivotData,\n          rowKey,\n          []);\n\n        });\n      }\n      if (colTotals) {\n        colKeys.forEach((colKey) => {\n          colTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n          pivotData,\n          [],\n          colKey);\n\n        });\n      }\n      if (rowTotals && colTotals) {\n        grandTotalCallback = this.clickHandler(pivotData, [], []);\n      }\n    }\n\n    return {\n      pivotData,\n      colAttrs,\n      rowAttrs,\n      colKeys,\n      rowKeys,\n      rowTotals,\n      colTotals,\n      arrowCollapsed: subtotalOptions.arrowCollapsed,\n      arrowExpanded: subtotalOptions.arrowExpanded,\n      colSubtotalDisplay,\n      rowSubtotalDisplay,\n      cellCallbacks,\n      rowTotalCallbacks,\n      colTotalCallbacks,\n      grandTotalCallback,\n      namesMapping };\n\n  }\n\n  clickHandler(pivotData, rowValues, colValues) {\n    const colAttrs = this.props.cols;\n    const rowAttrs = this.props.rows;\n    const value = pivotData.getAggregator(rowValues, colValues).value();\n    const filters = {};\n    const colLimit = Math.min(colAttrs.length, colValues.length);\n    for (let i = 0; i < colLimit; i += 1) {\n      const attr = colAttrs[i];\n      if (colValues[i] !== null) {\n        filters[attr] = colValues[i];\n      }\n    }\n    const rowLimit = Math.min(rowAttrs.length, rowValues.length);\n    for (let i = 0; i < rowLimit; i += 1) {\n      const attr = rowAttrs[i];\n      if (rowValues[i] !== null) {\n        filters[attr] = rowValues[i];\n      }\n    }\n    return (e) =>\n    this.props.tableOptions.clickCallback(e, value, filters, pivotData);\n  }\n\n  clickHeaderHandler(\n  pivotData,\n  values,\n  attrs,\n  attrIdx,\n  callback,\n  isSubtotal = false,\n  isGrandTotal = false)\n  {\n    const filters = {};\n    for (let i = 0; i <= attrIdx; i += 1) {\n      const attr = attrs[i];\n      filters[attr] = values[i];\n    }\n    return (e) =>\n    callback(\n    e,\n    values[attrIdx],\n    filters,\n    pivotData,\n    isSubtotal,\n    isGrandTotal);\n\n  }\n\n  collapseAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Collapse an entire attribute.\n      e.stopPropagation();\n      const keyLen = attrIdx + 1;\n      const collapsed = allKeys.filter((k) => k.length === keyLen).map(_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey);\n\n      const updates = {};\n      collapsed.forEach((k) => {\n        updates[k] = true;\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates } }));\n\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates } }));\n\n      }\n    };\n  }\n\n  expandAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Expand an entire attribute. This implicitly implies expanding all of the\n      // parents as well. It's a bit inefficient but ah well...\n      e.stopPropagation();\n      const updates = {};\n      allKeys.forEach((k) => {\n        for (let i = 0; i <= attrIdx; i += 1) {\n          updates[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(k.slice(0, i + 1))] = false;\n        }\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates } }));\n\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates } }));\n\n      }\n    };\n  }\n\n  toggleRowKey(flatRowKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedRows: {\n          ...state.collapsedRows,\n          [flatRowKey]: !state.collapsedRows[flatRowKey] } }));\n\n\n    };\n  }\n\n  toggleColKey(flatColKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedCols: {\n          ...state.collapsedCols,\n          [flatColKey]: !state.collapsedCols[flatColKey] } }));\n\n\n    };\n  }\n\n  calcAttrSpans(attrArr, numAttrs) {\n    // Given an array of attribute values (i.e. each element is another array with\n    // the value at every level), compute the spans for every attribute value at\n    // every level. The return value is a nested array of the same shape. It has\n    // -1's for repeated values and the span number otherwise.\n\n    const spans = [];\n    // Index of the last new value\n    const li = Array(numAttrs).map(() => 0);\n    let lv = Array(numAttrs).map(() => null);\n    for (let i = 0; i < attrArr.length; i += 1) {\n      // Keep increasing span values as long as the last keys are the same. For\n      // the rest, record spans of 1. Update the indices too.\n      const cv = attrArr[i];\n      const ent = [];\n      let depth = 0;\n      const limit = Math.min(lv.length, cv.length);\n      while (depth < limit && lv[depth] === cv[depth]) {\n        ent.push(-1);\n        spans[li[depth]][depth] += 1;\n        depth += 1;\n      }\n      while (depth < cv.length) {\n        li[depth] = i;\n        ent.push(1);\n        depth += 1;\n      }\n      spans.push(ent);\n      lv = cv;\n    }\n    return spans;\n  }\n\n  renderColHeaderRow(attrName, attrIdx, pivotSettings) {\n    // Render a single row in the column header at the top of the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      colKeys,\n      visibleColKeys,\n      colAttrSpans,\n      rowTotals,\n      arrowExpanded,\n      arrowCollapsed,\n      colSubtotalDisplay,\n      maxColVisible,\n      pivotData,\n      namesMapping } =\n    pivotSettings;\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      dateFormatters } =\n    this.props.tableOptions;\n\n    const spaceCell =\n    attrIdx === 0 && rowAttrs.length !== 0 ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"padding\",\n      colSpan: rowAttrs.length,\n      rowSpan: colAttrs.length,\n      \"aria-hidden\": \"true\" }) :\n\n    null;\n\n    const needToggle =\n    colSubtotalDisplay.enabled && attrIdx !== colAttrs.length - 1;\n    let arrowClickHandle = null;\n    let subArrow = null;\n    if (needToggle) {\n      arrowClickHandle =\n      attrIdx + 1 < maxColVisible ?\n      this.collapseAttr(false, attrIdx, colKeys) :\n      this.expandAttr(false, attrIdx, colKeys);\n      subArrow = attrIdx + 1 < maxColVisible ? arrowExpanded : arrowCollapsed;\n    }\n    const attrNameCell =\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { key: \"label\", className: \"pvtAxisLabel\" },\n    displayHeaderCell(\n    needToggle,\n    subArrow,\n    arrowClickHandle,\n    attrName,\n    namesMapping));\n\n\n\n\n    const attrValueCells = [];\n    const rowIncrSpan = rowAttrs.length !== 0 ? 1 : 0;\n    // Iterate through columns. Jump over duplicate values.\n    let i = 0;\n    while (i < visibleColKeys.length) {\n      const colKey = visibleColKeys[i];\n      const colSpan = attrIdx < colKey.length ? colAttrSpans[i][attrIdx] : 1;\n      let colLabelClass = 'pvtColLabel';\n      if (attrIdx < colKey.length) {\n        if (\n        highlightHeaderCellsOnHover &&\n        !omittedHighlightHeaderGroups.includes(colAttrs[attrIdx]))\n        {\n          colLabelClass += ' hoverable';\n        }\n        if (\n        highlightedHeaderCells &&\n        Array.isArray(highlightedHeaderCells[colAttrs[attrIdx]]) &&\n        highlightedHeaderCells[colAttrs[attrIdx]].includes(colKey[attrIdx]))\n        {\n          colLabelClass += ' active';\n        }\n\n        const rowSpan = 1 + (attrIdx === colAttrs.length - 1 ? rowIncrSpan : 0);\n        const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey.slice(0, attrIdx + 1));\n        const onArrowClick = needToggle ? this.toggleColKey(flatColKey) : null;\n\n        const headerCellFormattedValue =\n        dateFormatters &&\n        dateFormatters[attrName] &&\n        typeof dateFormatters[attrName] === 'function' ?\n        dateFormatters[attrName](colKey[attrIdx]) :\n        colKey[attrIdx];\n        attrValueCells.push(\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n          className: colLabelClass,\n          key: `colKey-${flatColKey}`,\n          colSpan: colSpan,\n          rowSpan: rowSpan,\n          onClick: this.clickHeaderHandler(\n          pivotData,\n          colKey,\n          this.props.cols,\n          attrIdx,\n          this.props.tableOptions.clickColumnHeaderCallback) },\n\n\n        displayHeaderCell(\n        needToggle,\n        this.state.collapsedCols[flatColKey] ?\n        arrowCollapsed :\n        arrowExpanded,\n        onArrowClick,\n        headerCellFormattedValue,\n        namesMapping)));\n\n\n\n      } else if (attrIdx === colKey.length) {\n        const rowSpan = colAttrs.length - colKey.length + rowIncrSpan;\n        attrValueCells.push(\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n          className: `${colLabelClass} pvtSubtotalLabel`,\n          key: `colKeyBuffer-${(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)}`,\n          colSpan: colSpan,\n          rowSpan: rowSpan,\n          onClick: this.clickHeaderHandler(\n          pivotData,\n          colKey,\n          this.props.cols,\n          attrIdx,\n          this.props.tableOptions.clickColumnHeaderCallback,\n          true) }, \"Subtotal\"));\n\n\n\n\n\n      }\n      // The next colSpan columns will have the same value anyway...\n      i += colSpan;\n    }\n\n    const totalCell =\n    attrIdx === 0 && rowTotals ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"total\",\n      className: \"pvtTotalLabel\",\n      rowSpan: colAttrs.length + Math.min(rowAttrs.length, 1),\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      [],\n      this.props.cols,\n      attrIdx,\n      this.props.tableOptions.clickColumnHeaderCallback,\n      false,\n      true) },\n\n\n    `Total (${this.props.aggregatorName})`) :\n\n    null;\n\n    const cells = [spaceCell, attrNameCell, ...attrValueCells, totalCell];\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: `colAttr-${attrIdx}` }, cells);\n  }\n\n  renderRowHeaderRow(pivotSettings) {\n    // Render just the attribute names of the rows (the actual attribute values\n    // will show up in the individual rows).\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowKeys,\n      arrowCollapsed,\n      arrowExpanded,\n      rowSubtotalDisplay,\n      maxRowVisible,\n      pivotData,\n      namesMapping } =\n    pivotSettings;\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: \"rowHdr\" },\n      rowAttrs.map((r, i) => {\n        const needLabelToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        let arrowClickHandle = null;\n        let subArrow = null;\n        if (needLabelToggle) {\n          arrowClickHandle =\n          i + 1 < maxRowVisible ?\n          this.collapseAttr(true, i, rowKeys) :\n          this.expandAttr(true, i, rowKeys);\n          subArrow = i + 1 < maxRowVisible ? arrowExpanded : arrowCollapsed;\n        }\n        return (\n          (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { className: \"pvtAxisLabel\", key: `rowAttr-${i}` },\n          displayHeaderCell(\n          needLabelToggle,\n          subArrow,\n          arrowClickHandle,\n          r,\n          namesMapping)));\n\n\n\n      }),\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n        className: \"pvtTotalLabel\",\n        key: \"padding\",\n        onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.rows,\n        0,\n        this.props.tableOptions.clickRowHeaderCallback,\n        false,\n        true) },\n\n\n      colAttrs.length === 0 ?\n      `Total (${this.props.aggregatorName})` :\n      null)));\n\n\n\n  }\n\n  renderTableRow(rowKey, rowIdx, pivotSettings) {\n    // Render a single row in the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowAttrSpans,\n      visibleColKeys,\n      pivotData,\n      rowTotals,\n      rowSubtotalDisplay,\n      arrowExpanded,\n      arrowCollapsed,\n      cellCallbacks,\n      rowTotalCallbacks,\n      namesMapping } =\n    pivotSettings;\n\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      cellColorFormatters,\n      dateFormatters } =\n    this.props.tableOptions;\n    const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n\n    const colIncrSpan = colAttrs.length !== 0 ? 1 : 0;\n    const attrValueCells = rowKey.map((r, i) => {\n      let valueCellClassName = 'pvtRowLabel';\n      if (\n      highlightHeaderCellsOnHover &&\n      !omittedHighlightHeaderGroups.includes(rowAttrs[i]))\n      {\n        valueCellClassName += ' hoverable';\n      }\n      if (\n      highlightedHeaderCells &&\n      Array.isArray(highlightedHeaderCells[rowAttrs[i]]) &&\n      highlightedHeaderCells[rowAttrs[i]].includes(r))\n      {\n        valueCellClassName += ' active';\n      }\n      const rowSpan = rowAttrSpans[rowIdx][i];\n      if (rowSpan > 0) {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey.slice(0, i + 1));\n        const colSpan = 1 + (i === rowAttrs.length - 1 ? colIncrSpan : 0);\n        const needRowToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        const onArrowClick = needRowToggle ?\n        this.toggleRowKey(flatRowKey) :\n        null;\n\n        const headerCellFormattedValue =\n        dateFormatters && dateFormatters[rowAttrs[i]] ?\n        dateFormatters[rowAttrs[i]](r) :\n        r;\n        return (\n          (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n            key: `rowKeyLabel-${i}`,\n            className: valueCellClassName,\n            rowSpan: rowSpan,\n            colSpan: colSpan,\n            onClick: this.clickHeaderHandler(\n            pivotData,\n            rowKey,\n            this.props.rows,\n            i,\n            this.props.tableOptions.clickRowHeaderCallback) },\n\n\n          displayHeaderCell(\n          needRowToggle,\n          this.state.collapsedRows[flatRowKey] ?\n          arrowCollapsed :\n          arrowExpanded,\n          onArrowClick,\n          headerCellFormattedValue,\n          namesMapping)));\n\n\n\n      }\n      return null;\n    });\n\n    const attrValuePaddingCell =\n    rowKey.length < rowAttrs.length ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      className: \"pvtRowLabel pvtSubtotalLabel\",\n      key: \"rowKeyBuffer\",\n      colSpan: rowAttrs.length - rowKey.length + colIncrSpan,\n      rowSpan: 1,\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      rowKey,\n      this.props.rows,\n      rowKey.length,\n      this.props.tableOptions.clickRowHeaderCallback,\n      true) }, \"Subtotal\") :\n\n\n\n\n    null;\n\n    const rowClickHandlers = cellCallbacks[flatRowKey] || {};\n    const valueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator(rowKey, colKey);\n      const aggValue = agg.value();\n\n      const keys = [...rowKey, ...colKey];\n      let backgroundColor;\n      if (cellColorFormatters) {\n        Object.values(cellColorFormatters).forEach((cellColorFormatter) => {\n          if (Array.isArray(cellColorFormatter)) {\n            keys.forEach((key) => {\n              if (backgroundColor) {\n                return;\n              }\n              cellColorFormatter.\n              filter((formatter) => formatter.column === key).\n              forEach((formatter) => {\n                const formatterResult = formatter.getColorFromValue(aggValue);\n                if (formatterResult) {\n                  backgroundColor = formatterResult;\n                }\n              });\n            });\n          }\n        });\n      }\n\n      const style = agg.isSubtotal ?\n      { fontWeight: 'bold' } :\n      { backgroundColor };\n\n      return (\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtVal\",\n          key: `pvtVal-${flatColKey}`,\n          onClick: rowClickHandlers[flatColKey],\n          style: style },\n\n        agg.format(aggValue)));\n\n\n    });\n\n    let totalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator(rowKey, []);\n      const aggValue = agg.value();\n      totalCell =\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n        key: \"total\",\n        className: \"pvtTotal\",\n        onClick: rowTotalCallbacks[flatRowKey] },\n\n      agg.format(aggValue));\n\n\n    }\n\n    const rowCells = [\n    ...attrValueCells,\n    attrValuePaddingCell,\n    ...valueCells,\n    totalCell];\n\n\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: `keyRow-${flatRowKey}` }, rowCells);\n  }\n\n  renderTotalsRow(pivotSettings) {\n    // Render the final totals rows that has the totals for all the columns.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      visibleColKeys,\n      rowTotals,\n      pivotData,\n      colTotalCallbacks,\n      grandTotalCallback } =\n    pivotSettings;\n\n    const totalLabelCell =\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"label\",\n      className: \"pvtTotalLabel pvtRowTotalLabel\",\n      colSpan: rowAttrs.length + Math.min(colAttrs.length, 1),\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      [],\n      this.props.rows,\n      0,\n      this.props.tableOptions.clickRowHeaderCallback,\n      false,\n      true) },\n\n\n    `Total (${this.props.aggregatorName})`);\n\n\n\n    const totalValueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator([], colKey);\n      const aggValue = agg.value();\n\n      return (\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtTotal pvtRowTotal\",\n          key: `total-${flatColKey}`,\n          onClick: colTotalCallbacks[flatColKey],\n          style: { padding: '5px' } },\n\n        agg.format(aggValue)));\n\n\n    });\n\n    let grandTotalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator([], []);\n      const aggValue = agg.value();\n      grandTotalCell =\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n        key: \"total\",\n        className: \"pvtGrandTotal pvtRowTotal\",\n        onClick: grandTotalCallback },\n\n      agg.format(aggValue));\n\n\n    }\n\n    const totalCells = [totalLabelCell, ...totalValueCells, grandTotalCell];\n\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: \"total\", className: \"pvtRowTotals\" },\n      totalCells));\n\n\n  }\n\n  visibleKeys(keys, collapsed, numAttrs, subtotalDisplay) {\n    return keys.filter(\n    (key) =>\n    // Is the key hidden by one of its parents?\n    !key.some((k, j) => collapsed[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key.slice(0, j))]) && (\n\n    key.length === numAttrs ||\n    // Children hidden. Must show total.\n    (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key) in collapsed ||\n    // Don't hide totals.\n    !subtotalDisplay.hideOnExpand));\n\n  }\n\n  render() {\n    if (this.cachedProps !== this.props) {\n      this.cachedProps = this.props;\n      this.cachedBasePivotSettings = this.getBasePivotSettings();\n    }\n    const {\n      colAttrs,\n      rowAttrs,\n      rowKeys,\n      colKeys,\n      colTotals,\n      rowSubtotalDisplay,\n      colSubtotalDisplay } =\n    this.cachedBasePivotSettings;\n\n    // Need to account for exclusions to compute the effective row\n    // and column keys.\n    const visibleRowKeys = this.visibleKeys(\n    rowKeys,\n    this.state.collapsedRows,\n    rowAttrs.length,\n    rowSubtotalDisplay);\n\n    const visibleColKeys = this.visibleKeys(\n    colKeys,\n    this.state.collapsedCols,\n    colAttrs.length,\n    colSubtotalDisplay);\n\n\n    const pivotSettings = {\n      visibleRowKeys,\n      maxRowVisible: Math.max(...visibleRowKeys.map((k) => k.length)),\n      visibleColKeys,\n      maxColVisible: Math.max(...visibleColKeys.map((k) => k.length)),\n      rowAttrSpans: this.calcAttrSpans(visibleRowKeys, rowAttrs.length),\n      colAttrSpans: this.calcAttrSpans(visibleColKeys, colAttrs.length),\n      ...this.cachedBasePivotSettings };\n\n\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Styles__WEBPACK_IMPORTED_MODULE_4__.Styles, null,\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"table\", { className: \"pvtTable\", role: \"grid\" },\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"thead\", null,\n      colAttrs.map((c, j) =>\n      this.renderColHeaderRow(c, j, pivotSettings)),\n\n      rowAttrs.length !== 0 && this.renderRowHeaderRow(pivotSettings)),\n\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tbody\", null,\n      visibleRowKeys.map((r, i) =>\n      this.renderTableRow(r, i, pivotSettings)),\n\n      colTotals && this.renderTotalsRow(pivotSettings)))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableRenderer.propTypes = {\n  ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.propTypes,\n  tableOptions: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().object) };\n\nTableRenderer.defaultProps = { ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.defaultProps, tableOptions: {} };;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(parseLabel, \"parseLabel\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");reactHotLoader.register(displayHeaderCell, \"displayHeaderCell\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");reactHotLoader.register(TableRenderer, \"TableRenderer\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7OztBQUlBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFLQTtBQTF6QkE7QUFBQTtBQTZ6QkE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3g/NDc2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHsgUGl2b3REYXRhLCBmbGF0S2V5IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xyXG5pbXBvcnQgeyBTdHlsZXMgfSBmcm9tICcuL1N0eWxlcyc7XHJcblxyXG5jb25zdCBwYXJzZUxhYmVsID0gdmFsdWUgPT4ge1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5SGVhZGVyQ2VsbChcclxuICBuZWVkVG9nZ2xlLFxyXG4gIEFycm93SWNvbixcclxuICBvbkFycm93Q2xpY2ssXHJcbiAgdmFsdWUsXHJcbiAgbmFtZXNNYXBwaW5nLFxyXG4pIHtcclxuICBjb25zdCBuYW1lID0gbmFtZXNNYXBwaW5nW3ZhbHVlXSB8fCB2YWx1ZTtcclxuICByZXR1cm4gbmVlZFRvZ2dsZSA/IChcclxuICAgIDxzcGFuIGNsYXNzTmFtZT1cInRvZ2dsZS13cmFwcGVyXCI+XHJcbiAgICAgIDxzcGFuXHJcbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXHJcbiAgICAgICAgdGFiSW5kZXg9XCIwXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJ0b2dnbGVcIlxyXG4gICAgICAgIG9uQ2xpY2s9e29uQXJyb3dDbGlja31cclxuICAgICAgPlxyXG4gICAgICAgIHtBcnJvd0ljb259XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidG9nZ2xlLXZhbFwiPntwYXJzZUxhYmVsKG5hbWUpfTwvc3Bhbj5cclxuICAgIDwvc3Bhbj5cclxuICApIDogKFxyXG4gICAgcGFyc2VMYWJlbChuYW1lKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJsZVJlbmRlcmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgIC8vIFdlIG5lZWQgc3RhdGUgdG8gcmVjb3JkIHdoaWNoIGVudHJpZXMgYXJlIGNvbGxhcHNlZCBhbmQgd2hpY2ggYXJlbid0LlxyXG4gICAgLy8gVGhpcyBpcyBhbiBvYmplY3Qgd2l0aCBmbGF0LWtleXMgaW5kaWNhdGluZyBpZiB0aGUgY29ycmVzcG9uZGluZyByb3dzXHJcbiAgICAvLyBzaG91bGQgYmUgY29sbGFwc2VkLlxyXG4gICAgdGhpcy5zdGF0ZSA9IHsgY29sbGFwc2VkUm93czoge30sIGNvbGxhcHNlZENvbHM6IHt9IH07XHJcblxyXG4gICAgdGhpcy5jbGlja0hlYWRlckhhbmRsZXIgPSB0aGlzLmNsaWNrSGVhZGVySGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbGlja0hhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QmFzZVBpdm90U2V0dGluZ3MoKSB7XHJcbiAgICAvLyBPbmUtdGltZSBleHRyYWN0aW9uIG9mIHBpdm90IHNldHRpbmdzIHRoYXQgd2UnbGwgdXNlIHRocm91Z2hvdXQgdGhlIHJlbmRlci5cclxuXHJcbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgY29sQXR0cnMgPSBwcm9wcy5jb2xzO1xyXG4gICAgY29uc3Qgcm93QXR0cnMgPSBwcm9wcy5yb3dzO1xyXG5cclxuICAgIGNvbnN0IHRhYmxlT3B0aW9ucyA9IHtcclxuICAgICAgcm93VG90YWxzOiB0cnVlLFxyXG4gICAgICBjb2xUb3RhbHM6IHRydWUsXHJcbiAgICAgIC4uLnByb3BzLnRhYmxlT3B0aW9ucyxcclxuICAgIH07XHJcbiAgICBjb25zdCByb3dUb3RhbHMgPSB0YWJsZU9wdGlvbnMucm93VG90YWxzIHx8IGNvbEF0dHJzLmxlbmd0aCA9PT0gMDtcclxuICAgIGNvbnN0IGNvbFRvdGFscyA9IHRhYmxlT3B0aW9ucy5jb2xUb3RhbHMgfHwgcm93QXR0cnMubGVuZ3RoID09PSAwO1xyXG5cclxuICAgIGNvbnN0IG5hbWVzTWFwcGluZyA9IHByb3BzLm5hbWVzTWFwcGluZyB8fCB7fTtcclxuICAgIGNvbnN0IHN1YnRvdGFsT3B0aW9ucyA9IHtcclxuICAgICAgYXJyb3dDb2xsYXBzZWQ6ICdcXHUyNUIyJyxcclxuICAgICAgYXJyb3dFeHBhbmRlZDogJ1xcdTI1QkMnLFxyXG4gICAgICAuLi5wcm9wcy5zdWJ0b3RhbE9wdGlvbnMsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNvbFN1YnRvdGFsRGlzcGxheSA9IHtcclxuICAgICAgZGlzcGxheU9uVG9wOiBmYWxzZSxcclxuICAgICAgZW5hYmxlZDogcm93VG90YWxzLFxyXG4gICAgICBoaWRlT25FeHBhbmQ6IGZhbHNlLFxyXG4gICAgICAuLi5zdWJ0b3RhbE9wdGlvbnMuY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByb3dTdWJ0b3RhbERpc3BsYXkgPSB7XHJcbiAgICAgIGRpc3BsYXlPblRvcDogZmFsc2UsXHJcbiAgICAgIGVuYWJsZWQ6IGNvbFRvdGFscyxcclxuICAgICAgaGlkZU9uRXhwYW5kOiBmYWxzZSxcclxuICAgICAgLi4uc3VidG90YWxPcHRpb25zLnJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcGl2b3REYXRhID0gbmV3IFBpdm90RGF0YShwcm9wcywge1xyXG4gICAgICByb3dFbmFibGVkOiByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCxcclxuICAgICAgY29sRW5hYmxlZDogY29sU3VidG90YWxEaXNwbGF5LmVuYWJsZWQsXHJcbiAgICAgIHJvd1BhcnRpYWxPblRvcDogcm93U3VidG90YWxEaXNwbGF5LmRpc3BsYXlPblRvcCxcclxuICAgICAgY29sUGFydGlhbE9uVG9wOiBjb2xTdWJ0b3RhbERpc3BsYXkuZGlzcGxheU9uVG9wLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCByb3dLZXlzID0gcGl2b3REYXRhLmdldFJvd0tleXMoKTtcclxuICAgIGNvbnN0IGNvbEtleXMgPSBwaXZvdERhdGEuZ2V0Q29sS2V5cygpO1xyXG5cclxuICAgIC8vIEFsc28gcHJlLWNhbGN1bGF0ZSBhbGwgdGhlIGNhbGxiYWNrcyBmb3IgY2VsbHMsIGV0Yy4uLiBUaGlzIGlzIG5pY2UgdG8gaGF2ZSB0b1xyXG4gICAgLy8gYXZvaWQgcmUtY2FsY3VsYXRpb25zIG9mIHRoZSBjYWxsLWJhY2tzIG9uIGNlbGwgZXhwYW5zaW9ucywgZXRjLi4uXHJcbiAgICBjb25zdCBjZWxsQ2FsbGJhY2tzID0ge307XHJcbiAgICBjb25zdCByb3dUb3RhbENhbGxiYWNrcyA9IHt9O1xyXG4gICAgY29uc3QgY29sVG90YWxDYWxsYmFja3MgPSB7fTtcclxuICAgIGxldCBncmFuZFRvdGFsQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgaWYgKHRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKSB7XHJcbiAgICAgIHJvd0tleXMuZm9yRWFjaChyb3dLZXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleSk7XHJcbiAgICAgICAgaWYgKCEoZmxhdFJvd0tleSBpbiBjZWxsQ2FsbGJhY2tzKSkge1xyXG4gICAgICAgICAgY2VsbENhbGxiYWNrc1tmbGF0Um93S2V5XSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sS2V5ID0+IHtcclxuICAgICAgICAgIGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV1bZmxhdEtleShjb2xLZXkpXSA9IHRoaXMuY2xpY2tIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIHJvd0tleSxcclxuICAgICAgICAgICAgY29sS2V5LFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBBZGQgaW4gdG90YWxzIGFzIHdlbGwuXHJcbiAgICAgIGlmIChyb3dUb3RhbHMpIHtcclxuICAgICAgICByb3dLZXlzLmZvckVhY2gocm93S2V5ID0+IHtcclxuICAgICAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzW2ZsYXRLZXkocm93S2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcclxuICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sVG90YWxzKSB7XHJcbiAgICAgICAgY29sS2V5cy5mb3JFYWNoKGNvbEtleSA9PiB7XHJcbiAgICAgICAgICBjb2xUb3RhbENhbGxiYWNrc1tmbGF0S2V5KGNvbEtleSldID0gdGhpcy5jbGlja0hhbmRsZXIoXHJcbiAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIGNvbEtleSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJvd1RvdGFscyAmJiBjb2xUb3RhbHMpIHtcclxuICAgICAgICBncmFuZFRvdGFsQ2FsbGJhY2sgPSB0aGlzLmNsaWNrSGFuZGxlcihwaXZvdERhdGEsIFtdLCBbXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwaXZvdERhdGEsXHJcbiAgICAgIGNvbEF0dHJzLFxyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sS2V5cyxcclxuICAgICAgcm93S2V5cyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICBjb2xUb3RhbHMsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkOiBzdWJ0b3RhbE9wdGlvbnMuYXJyb3dDb2xsYXBzZWQsXHJcbiAgICAgIGFycm93RXhwYW5kZWQ6IHN1YnRvdGFsT3B0aW9ucy5hcnJvd0V4cGFuZGVkLFxyXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgICAgY2VsbENhbGxiYWNrcyxcclxuICAgICAgcm93VG90YWxDYWxsYmFja3MsXHJcbiAgICAgIGNvbFRvdGFsQ2FsbGJhY2tzLFxyXG4gICAgICBncmFuZFRvdGFsQ2FsbGJhY2ssXHJcbiAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjbGlja0hhbmRsZXIocGl2b3REYXRhLCByb3dWYWx1ZXMsIGNvbFZhbHVlcykge1xyXG4gICAgY29uc3QgY29sQXR0cnMgPSB0aGlzLnByb3BzLmNvbHM7XHJcbiAgICBjb25zdCByb3dBdHRycyA9IHRoaXMucHJvcHMucm93cztcclxuICAgIGNvbnN0IHZhbHVlID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3Iocm93VmFsdWVzLCBjb2xWYWx1ZXMpLnZhbHVlKCk7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0ge307XHJcbiAgICBjb25zdCBjb2xMaW1pdCA9IE1hdGgubWluKGNvbEF0dHJzLmxlbmd0aCwgY29sVmFsdWVzLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbExpbWl0OyBpICs9IDEpIHtcclxuICAgICAgY29uc3QgYXR0ciA9IGNvbEF0dHJzW2ldO1xyXG4gICAgICBpZiAoY29sVmFsdWVzW2ldICE9PSBudWxsKSB7XHJcbiAgICAgICAgZmlsdGVyc1thdHRyXSA9IGNvbFZhbHVlc1tpXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgcm93TGltaXQgPSBNYXRoLm1pbihyb3dBdHRycy5sZW5ndGgsIHJvd1ZhbHVlcy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dMaW1pdDsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IGF0dHIgPSByb3dBdHRyc1tpXTtcclxuICAgICAgaWYgKHJvd1ZhbHVlc1tpXSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGZpbHRlcnNbYXR0cl0gPSByb3dWYWx1ZXNbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlID0+XHJcbiAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ2FsbGJhY2soZSwgdmFsdWUsIGZpbHRlcnMsIHBpdm90RGF0YSk7XHJcbiAgfVxyXG5cclxuICBjbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgICBwaXZvdERhdGEsXHJcbiAgICB2YWx1ZXMsXHJcbiAgICBhdHRycyxcclxuICAgIGF0dHJJZHgsXHJcbiAgICBjYWxsYmFjayxcclxuICAgIGlzU3VidG90YWwgPSBmYWxzZSxcclxuICAgIGlzR3JhbmRUb3RhbCA9IGZhbHNlLFxyXG4gICkge1xyXG4gICAgY29uc3QgZmlsdGVycyA9IHt9O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gYXR0cklkeDsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IGF0dHIgPSBhdHRyc1tpXTtcclxuICAgICAgZmlsdGVyc1thdHRyXSA9IHZhbHVlc1tpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBlID0+XHJcbiAgICAgIGNhbGxiYWNrKFxyXG4gICAgICAgIGUsXHJcbiAgICAgICAgdmFsdWVzW2F0dHJJZHhdLFxyXG4gICAgICAgIGZpbHRlcnMsXHJcbiAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgIGlzU3VidG90YWwsXHJcbiAgICAgICAgaXNHcmFuZFRvdGFsLFxyXG4gICAgICApO1xyXG4gIH1cclxuXHJcbiAgY29sbGFwc2VBdHRyKHJvd09yQ29sLCBhdHRySWR4LCBhbGxLZXlzKSB7XHJcbiAgICByZXR1cm4gZSA9PiB7XHJcbiAgICAgIC8vIENvbGxhcHNlIGFuIGVudGlyZSBhdHRyaWJ1dGUuXHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnN0IGtleUxlbiA9IGF0dHJJZHggKyAxO1xyXG4gICAgICBjb25zdCBjb2xsYXBzZWQgPSBhbGxLZXlzLmZpbHRlcihrID0+IGsubGVuZ3RoID09PSBrZXlMZW4pLm1hcChmbGF0S2V5KTtcclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fTtcclxuICAgICAgY29sbGFwc2VkLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgdXBkYXRlc1trXSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJvd09yQ29sKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gICAgICAgICAgY29sbGFwc2VkUm93czogeyAuLi5zdGF0ZS5jb2xsYXBzZWRSb3dzLCAuLi51cGRhdGVzIH0sXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAgICAgICAgIGNvbGxhcHNlZENvbHM6IHsgLi4uc3RhdGUuY29sbGFwc2VkQ29scywgLi4udXBkYXRlcyB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGV4cGFuZEF0dHIocm93T3JDb2wsIGF0dHJJZHgsIGFsbEtleXMpIHtcclxuICAgIHJldHVybiBlID0+IHtcclxuICAgICAgLy8gRXhwYW5kIGFuIGVudGlyZSBhdHRyaWJ1dGUuIFRoaXMgaW1wbGljaXRseSBpbXBsaWVzIGV4cGFuZGluZyBhbGwgb2YgdGhlXHJcbiAgICAgIC8vIHBhcmVudHMgYXMgd2VsbC4gSXQncyBhIGJpdCBpbmVmZmljaWVudCBidXQgYWggd2VsbC4uLlxyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XHJcbiAgICAgIGFsbEtleXMuZm9yRWFjaChrID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBhdHRySWR4OyBpICs9IDEpIHtcclxuICAgICAgICAgIHVwZGF0ZXNbZmxhdEtleShrLnNsaWNlKDAsIGkgKyAxKSldID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChyb3dPckNvbCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAgICAgICAgIGNvbGxhcHNlZFJvd3M6IHsgLi4uc3RhdGUuY29sbGFwc2VkUm93cywgLi4udXBkYXRlcyB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgICBjb2xsYXBzZWRDb2xzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZENvbHMsIC4uLnVwZGF0ZXMgfSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB0b2dnbGVSb3dLZXkoZmxhdFJvd0tleSkge1xyXG4gICAgcmV0dXJuIGUgPT4ge1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgY29sbGFwc2VkUm93czoge1xyXG4gICAgICAgICAgLi4uc3RhdGUuY29sbGFwc2VkUm93cyxcclxuICAgICAgICAgIFtmbGF0Um93S2V5XTogIXN0YXRlLmNvbGxhcHNlZFJvd3NbZmxhdFJvd0tleV0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSkpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUNvbEtleShmbGF0Q29sS2V5KSB7XHJcbiAgICByZXR1cm4gZSA9PiB7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAgICAgICBjb2xsYXBzZWRDb2xzOiB7XHJcbiAgICAgICAgICAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLFxyXG4gICAgICAgICAgW2ZsYXRDb2xLZXldOiAhc3RhdGUuY29sbGFwc2VkQ29sc1tmbGF0Q29sS2V5XSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KSk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY2FsY0F0dHJTcGFucyhhdHRyQXJyLCBudW1BdHRycykge1xyXG4gICAgLy8gR2l2ZW4gYW4gYXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlcyAoaS5lLiBlYWNoIGVsZW1lbnQgaXMgYW5vdGhlciBhcnJheSB3aXRoXHJcbiAgICAvLyB0aGUgdmFsdWUgYXQgZXZlcnkgbGV2ZWwpLCBjb21wdXRlIHRoZSBzcGFucyBmb3IgZXZlcnkgYXR0cmlidXRlIHZhbHVlIGF0XHJcbiAgICAvLyBldmVyeSBsZXZlbC4gVGhlIHJldHVybiB2YWx1ZSBpcyBhIG5lc3RlZCBhcnJheSBvZiB0aGUgc2FtZSBzaGFwZS4gSXQgaGFzXHJcbiAgICAvLyAtMSdzIGZvciByZXBlYXRlZCB2YWx1ZXMgYW5kIHRoZSBzcGFuIG51bWJlciBvdGhlcndpc2UuXHJcblxyXG4gICAgY29uc3Qgc3BhbnMgPSBbXTtcclxuICAgIC8vIEluZGV4IG9mIHRoZSBsYXN0IG5ldyB2YWx1ZVxyXG4gICAgY29uc3QgbGkgPSBBcnJheShudW1BdHRycykubWFwKCgpID0+IDApO1xyXG4gICAgbGV0IGx2ID0gQXJyYXkobnVtQXR0cnMpLm1hcCgoKSA9PiBudWxsKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0ckFyci5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAvLyBLZWVwIGluY3JlYXNpbmcgc3BhbiB2YWx1ZXMgYXMgbG9uZyBhcyB0aGUgbGFzdCBrZXlzIGFyZSB0aGUgc2FtZS4gRm9yXHJcbiAgICAgIC8vIHRoZSByZXN0LCByZWNvcmQgc3BhbnMgb2YgMS4gVXBkYXRlIHRoZSBpbmRpY2VzIHRvby5cclxuICAgICAgY29uc3QgY3YgPSBhdHRyQXJyW2ldO1xyXG4gICAgICBjb25zdCBlbnQgPSBbXTtcclxuICAgICAgbGV0IGRlcHRoID0gMDtcclxuICAgICAgY29uc3QgbGltaXQgPSBNYXRoLm1pbihsdi5sZW5ndGgsIGN2Lmxlbmd0aCk7XHJcbiAgICAgIHdoaWxlIChkZXB0aCA8IGxpbWl0ICYmIGx2W2RlcHRoXSA9PT0gY3ZbZGVwdGhdKSB7XHJcbiAgICAgICAgZW50LnB1c2goLTEpO1xyXG4gICAgICAgIHNwYW5zW2xpW2RlcHRoXV1bZGVwdGhdICs9IDE7XHJcbiAgICAgICAgZGVwdGggKz0gMTtcclxuICAgICAgfVxyXG4gICAgICB3aGlsZSAoZGVwdGggPCBjdi5sZW5ndGgpIHtcclxuICAgICAgICBsaVtkZXB0aF0gPSBpO1xyXG4gICAgICAgIGVudC5wdXNoKDEpO1xyXG4gICAgICAgIGRlcHRoICs9IDE7XHJcbiAgICAgIH1cclxuICAgICAgc3BhbnMucHVzaChlbnQpO1xyXG4gICAgICBsdiA9IGN2O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNwYW5zO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29sSGVhZGVyUm93KGF0dHJOYW1lLCBhdHRySWR4LCBwaXZvdFNldHRpbmdzKSB7XHJcbiAgICAvLyBSZW5kZXIgYSBzaW5nbGUgcm93IGluIHRoZSBjb2x1bW4gaGVhZGVyIGF0IHRoZSB0b3Agb2YgdGhlIHBpdm90IHRhYmxlLlxyXG5cclxuICAgIGNvbnN0IHtcclxuICAgICAgcm93QXR0cnMsXHJcbiAgICAgIGNvbEF0dHJzLFxyXG4gICAgICBjb2xLZXlzLFxyXG4gICAgICB2aXNpYmxlQ29sS2V5cyxcclxuICAgICAgY29sQXR0clNwYW5zLFxyXG4gICAgICByb3dUb3RhbHMsXHJcbiAgICAgIGFycm93RXhwYW5kZWQsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkLFxyXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIG1heENvbFZpc2libGUsXHJcbiAgICAgIHBpdm90RGF0YSxcclxuICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcixcclxuICAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwcyA9IFtdLFxyXG4gICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzLFxyXG4gICAgICBkYXRlRm9ybWF0dGVycyxcclxuICAgIH0gPSB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBzcGFjZUNlbGwgPVxyXG4gICAgICBhdHRySWR4ID09PSAwICYmIHJvd0F0dHJzLmxlbmd0aCAhPT0gMCA/IChcclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGtleT1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgY29sU3Bhbj17cm93QXR0cnMubGVuZ3RofVxyXG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RofVxyXG4gICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAvPlxyXG4gICAgICApIDogbnVsbDtcclxuXHJcbiAgICBjb25zdCBuZWVkVG9nZ2xlID1cclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgYXR0cklkeCAhPT0gY29sQXR0cnMubGVuZ3RoIC0gMTtcclxuICAgIGxldCBhcnJvd0NsaWNrSGFuZGxlID0gbnVsbDtcclxuICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XHJcbiAgICBpZiAobmVlZFRvZ2dsZSkge1xyXG4gICAgICBhcnJvd0NsaWNrSGFuZGxlID1cclxuICAgICAgICBhdHRySWR4ICsgMSA8IG1heENvbFZpc2libGVcclxuICAgICAgICAgID8gdGhpcy5jb2xsYXBzZUF0dHIoZmFsc2UsIGF0dHJJZHgsIGNvbEtleXMpXHJcbiAgICAgICAgICA6IHRoaXMuZXhwYW5kQXR0cihmYWxzZSwgYXR0cklkeCwgY29sS2V5cyk7XHJcbiAgICAgIHN1YkFycm93ID0gYXR0cklkeCArIDEgPCBtYXhDb2xWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXR0ck5hbWVDZWxsID0gKFxyXG4gICAgICA8dGgga2V5PVwibGFiZWxcIiBjbGFzc05hbWU9XCJwdnRBeGlzTGFiZWxcIj5cclxuICAgICAgICB7ZGlzcGxheUhlYWRlckNlbGwoXHJcbiAgICAgICAgICBuZWVkVG9nZ2xlLFxyXG4gICAgICAgICAgc3ViQXJyb3csXHJcbiAgICAgICAgICBhcnJvd0NsaWNrSGFuZGxlLFxyXG4gICAgICAgICAgYXR0ck5hbWUsXHJcbiAgICAgICAgICBuYW1lc01hcHBpbmcsXHJcbiAgICAgICAgKX1cclxuICAgICAgPC90aD5cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYXR0clZhbHVlQ2VsbHMgPSBbXTtcclxuICAgIGNvbnN0IHJvd0luY3JTcGFuID0gcm93QXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XHJcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggY29sdW1ucy4gSnVtcCBvdmVyIGR1cGxpY2F0ZSB2YWx1ZXMuXHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSAoaSA8IHZpc2libGVDb2xLZXlzLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBjb2xLZXkgPSB2aXNpYmxlQ29sS2V5c1tpXTtcclxuICAgICAgY29uc3QgY29sU3BhbiA9IGF0dHJJZHggPCBjb2xLZXkubGVuZ3RoID8gY29sQXR0clNwYW5zW2ldW2F0dHJJZHhdIDogMTtcclxuICAgICAgbGV0IGNvbExhYmVsQ2xhc3MgPSAncHZ0Q29sTGFiZWwnO1xyXG4gICAgICBpZiAoYXR0cklkeCA8IGNvbEtleS5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIgJiZcclxuICAgICAgICAgICFvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzLmluY2x1ZGVzKGNvbEF0dHJzW2F0dHJJZHhdKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29sTGFiZWxDbGFzcyArPSAnIGhvdmVyYWJsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHMgJiZcclxuICAgICAgICAgIEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tjb2xBdHRyc1thdHRySWR4XV0pICYmXHJcbiAgICAgICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzW2NvbEF0dHJzW2F0dHJJZHhdXS5pbmNsdWRlcyhjb2xLZXlbYXR0cklkeF0pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb2xMYWJlbENsYXNzICs9ICcgYWN0aXZlJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSAxICsgKGF0dHJJZHggPT09IGNvbEF0dHJzLmxlbmd0aCAtIDEgPyByb3dJbmNyU3BhbiA6IDApO1xyXG4gICAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleS5zbGljZSgwLCBhdHRySWR4ICsgMSkpO1xyXG4gICAgICAgIGNvbnN0IG9uQXJyb3dDbGljayA9IG5lZWRUb2dnbGUgPyB0aGlzLnRvZ2dsZUNvbEtleShmbGF0Q29sS2V5KSA6IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlckNlbGxGb3JtYXR0ZWRWYWx1ZSA9XHJcbiAgICAgICAgICBkYXRlRm9ybWF0dGVycyAmJlxyXG4gICAgICAgICAgZGF0ZUZvcm1hdHRlcnNbYXR0ck5hbWVdICYmXHJcbiAgICAgICAgICB0eXBlb2YgZGF0ZUZvcm1hdHRlcnNbYXR0ck5hbWVdID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgID8gZGF0ZUZvcm1hdHRlcnNbYXR0ck5hbWVdKGNvbEtleVthdHRySWR4XSlcclxuICAgICAgICAgICAgOiBjb2xLZXlbYXR0cklkeF07XHJcbiAgICAgICAgYXR0clZhbHVlQ2VsbHMucHVzaChcclxuICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NvbExhYmVsQ2xhc3N9XHJcbiAgICAgICAgICAgIGtleT17YGNvbEtleS0ke2ZsYXRDb2xLZXl9YH1cclxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cclxuICAgICAgICAgICAgcm93U3Bhbj17cm93U3Bhbn1cclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICAgIGNvbEtleSxcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbHMsXHJcbiAgICAgICAgICAgICAgYXR0cklkeCxcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrLFxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7ZGlzcGxheUhlYWRlckNlbGwoXHJcbiAgICAgICAgICAgICAgbmVlZFRvZ2dsZSxcclxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZENvbHNbZmxhdENvbEtleV1cclxuICAgICAgICAgICAgICAgID8gYXJyb3dDb2xsYXBzZWRcclxuICAgICAgICAgICAgICAgIDogYXJyb3dFeHBhbmRlZCxcclxuICAgICAgICAgICAgICBvbkFycm93Q2xpY2ssXHJcbiAgICAgICAgICAgICAgaGVhZGVyQ2VsbEZvcm1hdHRlZFZhbHVlLFxyXG4gICAgICAgICAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvdGg+LFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAoYXR0cklkeCA9PT0gY29sS2V5Lmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSBjb2xBdHRycy5sZW5ndGggLSBjb2xLZXkubGVuZ3RoICsgcm93SW5jclNwYW47XHJcbiAgICAgICAgYXR0clZhbHVlQ2VsbHMucHVzaChcclxuICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake2NvbExhYmVsQ2xhc3N9IHB2dFN1YnRvdGFsTGFiZWxgfVxyXG4gICAgICAgICAgICBrZXk9e2Bjb2xLZXlCdWZmZXItJHtmbGF0S2V5KGNvbEtleSl9YH1cclxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cclxuICAgICAgICAgICAgcm93U3Bhbj17cm93U3Bhbn1cclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICAgIGNvbEtleSxcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbHMsXHJcbiAgICAgICAgICAgICAgYXR0cklkeCxcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIFN1YnRvdGFsXHJcbiAgICAgICAgICA8L3RoPixcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFRoZSBuZXh0IGNvbFNwYW4gY29sdW1ucyB3aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUgYW55d2F5Li4uXHJcbiAgICAgIGkgKz0gY29sU3BhbjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbENlbGwgPVxyXG4gICAgICBhdHRySWR4ID09PSAwICYmIHJvd1RvdGFscyA/IChcclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGtleT1cInRvdGFsXCJcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsTGFiZWxcIlxyXG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RoICsgTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCAxKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbHMsXHJcbiAgICAgICAgICAgIGF0dHJJZHgsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7YFRvdGFsICgke3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWV9KWB9XHJcbiAgICAgICAgPC90aD5cclxuICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgY29uc3QgY2VsbHMgPSBbc3BhY2VDZWxsLCBhdHRyTmFtZUNlbGwsIC4uLmF0dHJWYWx1ZUNlbGxzLCB0b3RhbENlbGxdO1xyXG4gICAgcmV0dXJuIDx0ciBrZXk9e2Bjb2xBdHRyLSR7YXR0cklkeH1gfT57Y2VsbHN9PC90cj47XHJcbiAgfVxyXG5cclxuICByZW5kZXJSb3dIZWFkZXJSb3cocGl2b3RTZXR0aW5ncykge1xyXG4gICAgLy8gUmVuZGVyIGp1c3QgdGhlIGF0dHJpYnV0ZSBuYW1lcyBvZiB0aGUgcm93cyAodGhlIGFjdHVhbCBhdHRyaWJ1dGUgdmFsdWVzXHJcbiAgICAvLyB3aWxsIHNob3cgdXAgaW4gdGhlIGluZGl2aWR1YWwgcm93cykuXHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sQXR0cnMsXHJcbiAgICAgIHJvd0tleXMsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkLFxyXG4gICAgICBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIG1heFJvd1Zpc2libGUsXHJcbiAgICAgIHBpdm90RGF0YSxcclxuICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8dHIga2V5PVwicm93SGRyXCI+XHJcbiAgICAgICAge3Jvd0F0dHJzLm1hcCgociwgaSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbmVlZExhYmVsVG9nZ2xlID1cclxuICAgICAgICAgICAgcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgaSAhPT0gcm93QXR0cnMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgIGxldCBhcnJvd0NsaWNrSGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XHJcbiAgICAgICAgICBpZiAobmVlZExhYmVsVG9nZ2xlKSB7XHJcbiAgICAgICAgICAgIGFycm93Q2xpY2tIYW5kbGUgPVxyXG4gICAgICAgICAgICAgIGkgKyAxIDwgbWF4Um93VmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNvbGxhcHNlQXR0cih0cnVlLCBpLCByb3dLZXlzKVxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmV4cGFuZEF0dHIodHJ1ZSwgaSwgcm93S2V5cyk7XHJcbiAgICAgICAgICAgIHN1YkFycm93ID0gaSArIDEgPCBtYXhSb3dWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInB2dEF4aXNMYWJlbFwiIGtleT17YHJvd0F0dHItJHtpfWB9PlxyXG4gICAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAgICAgICAgICAgICAgIG5lZWRMYWJlbFRvZ2dsZSxcclxuICAgICAgICAgICAgICAgIHN1YkFycm93LFxyXG4gICAgICAgICAgICAgICAgYXJyb3dDbGlja0hhbmRsZSxcclxuICAgICAgICAgICAgICAgIHIsXHJcbiAgICAgICAgICAgICAgICBuYW1lc01hcHBpbmcsXHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC90aD5cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAgPHRoXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsXCJcclxuICAgICAgICAgIGtleT1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXHJcbiAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICApfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHtjb2xBdHRycy5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgPyBgVG90YWwgKCR7dGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZX0pYFxyXG4gICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgPC90aD5cclxuICAgICAgPC90cj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJUYWJsZVJvdyhyb3dLZXksIHJvd0lkeCwgcGl2b3RTZXR0aW5ncykge1xyXG4gICAgLy8gUmVuZGVyIGEgc2luZ2xlIHJvdyBpbiB0aGUgcGl2b3QgdGFibGUuXHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sQXR0cnMsXHJcbiAgICAgIHJvd0F0dHJTcGFucyxcclxuICAgICAgdmlzaWJsZUNvbEtleXMsXHJcbiAgICAgIHBpdm90RGF0YSxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIGFycm93RXhwYW5kZWQsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkLFxyXG4gICAgICBjZWxsQ2FsbGJhY2tzLFxyXG4gICAgICByb3dUb3RhbENhbGxiYWNrcyxcclxuICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIsXHJcbiAgICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHMgPSBbXSxcclxuICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyxcclxuICAgICAgY2VsbENvbG9yRm9ybWF0dGVycyxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICB9ID0gdGhpcy5wcm9wcy50YWJsZU9wdGlvbnM7XHJcbiAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xyXG5cclxuICAgIGNvbnN0IGNvbEluY3JTcGFuID0gY29sQXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XHJcbiAgICBjb25zdCBhdHRyVmFsdWVDZWxscyA9IHJvd0tleS5tYXAoKHIsIGkpID0+IHtcclxuICAgICAgbGV0IHZhbHVlQ2VsbENsYXNzTmFtZSA9ICdwdnRSb3dMYWJlbCc7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIgJiZcclxuICAgICAgICAhb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3Vwcy5pbmNsdWRlcyhyb3dBdHRyc1tpXSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgdmFsdWVDZWxsQ2xhc3NOYW1lICs9ICcgaG92ZXJhYmxlJztcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxyXG4gICAgICAgIEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tyb3dBdHRyc1tpXV0pICYmXHJcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tyb3dBdHRyc1tpXV0uaW5jbHVkZXMocilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdmFsdWVDZWxsQ2xhc3NOYW1lICs9ICcgYWN0aXZlJztcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByb3dTcGFuID0gcm93QXR0clNwYW5zW3Jvd0lkeF1baV07XHJcbiAgICAgIGlmIChyb3dTcGFuID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleS5zbGljZSgwLCBpICsgMSkpO1xyXG4gICAgICAgIGNvbnN0IGNvbFNwYW4gPSAxICsgKGkgPT09IHJvd0F0dHJzLmxlbmd0aCAtIDEgPyBjb2xJbmNyU3BhbiA6IDApO1xyXG4gICAgICAgIGNvbnN0IG5lZWRSb3dUb2dnbGUgPVxyXG4gICAgICAgICAgcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgaSAhPT0gcm93QXR0cnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBjb25zdCBvbkFycm93Q2xpY2sgPSBuZWVkUm93VG9nZ2xlXHJcbiAgICAgICAgICA/IHRoaXMudG9nZ2xlUm93S2V5KGZsYXRSb3dLZXkpXHJcbiAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlckNlbGxGb3JtYXR0ZWRWYWx1ZSA9XHJcbiAgICAgICAgICBkYXRlRm9ybWF0dGVycyAmJiBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV1cclxuICAgICAgICAgICAgPyBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV0ocilcclxuICAgICAgICAgICAgOiByO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8dGhcclxuICAgICAgICAgICAga2V5PXtgcm93S2V5TGFiZWwtJHtpfWB9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dmFsdWVDZWxsQ2xhc3NOYW1lfVxyXG4gICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxyXG4gICAgICAgICAgICBjb2xTcGFuPXtjb2xTcGFufVxyXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAgICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgICAgcm93S2V5LFxyXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAgICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrUm93SGVhZGVyQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAgICAgICAgICAgICBuZWVkUm93VG9nZ2xlLFxyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkUm93c1tmbGF0Um93S2V5XVxyXG4gICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxyXG4gICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICAgICAgICAgIG9uQXJyb3dDbGljayxcclxuICAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXHJcbiAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC90aD5cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYXR0clZhbHVlUGFkZGluZ0NlbGwgPVxyXG4gICAgICByb3dLZXkubGVuZ3RoIDwgcm93QXR0cnMubGVuZ3RoID8gKFxyXG4gICAgICAgIDx0aFxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0Um93TGFiZWwgcHZ0U3VidG90YWxMYWJlbFwiXHJcbiAgICAgICAgICBrZXk9XCJyb3dLZXlCdWZmZXJcIlxyXG4gICAgICAgICAgY29sU3Bhbj17cm93QXR0cnMubGVuZ3RoIC0gcm93S2V5Lmxlbmd0aCArIGNvbEluY3JTcGFufVxyXG4gICAgICAgICAgcm93U3Bhbj17MX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIHJvd0tleSxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxyXG4gICAgICAgICAgICByb3dLZXkubGVuZ3RoLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICBTdWJ0b3RhbFxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgICkgOiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHJvd0NsaWNrSGFuZGxlcnMgPSBjZWxsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldIHx8IHt9O1xyXG4gICAgY29uc3QgdmFsdWVDZWxscyA9IHZpc2libGVDb2xLZXlzLm1hcChjb2xLZXkgPT4ge1xyXG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xyXG4gICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihyb3dLZXksIGNvbEtleSk7XHJcbiAgICAgIGNvbnN0IGFnZ1ZhbHVlID0gYWdnLnZhbHVlKCk7XHJcblxyXG4gICAgICBjb25zdCBrZXlzID0gWy4uLnJvd0tleSwgLi4uY29sS2V5XTtcclxuICAgICAgbGV0IGJhY2tncm91bmRDb2xvcjtcclxuICAgICAgaWYgKGNlbGxDb2xvckZvcm1hdHRlcnMpIHtcclxuICAgICAgICBPYmplY3QudmFsdWVzKGNlbGxDb2xvckZvcm1hdHRlcnMpLmZvckVhY2goY2VsbENvbG9yRm9ybWF0dGVyID0+IHtcclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNlbGxDb2xvckZvcm1hdHRlcikpIHtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBjZWxsQ29sb3JGb3JtYXR0ZXJcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZm9ybWF0dGVyID0+IGZvcm1hdHRlci5jb2x1bW4gPT09IGtleSlcclxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZvcm1hdHRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlclJlc3VsdCA9IGZvcm1hdHRlci5nZXRDb2xvckZyb21WYWx1ZShhZ2dWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXR0ZXJSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmb3JtYXR0ZXJSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3R5bGUgPSBhZ2cuaXNTdWJ0b3RhbFxyXG4gICAgICAgID8geyBmb250V2VpZ2h0OiAnYm9sZCcgfVxyXG4gICAgICAgIDogeyBiYWNrZ3JvdW5kQ29sb3IgfTtcclxuXHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRkXHJcbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VmFsXCJcclxuICAgICAgICAgIGtleT17YHB2dFZhbC0ke2ZsYXRDb2xLZXl9YH1cclxuICAgICAgICAgIG9uQ2xpY2s9e3Jvd0NsaWNrSGFuZGxlcnNbZmxhdENvbEtleV19XHJcbiAgICAgICAgICBzdHlsZT17c3R5bGV9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgdG90YWxDZWxsID0gbnVsbDtcclxuICAgIGlmIChyb3dUb3RhbHMpIHtcclxuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3Iocm93S2V5LCBbXSk7XHJcbiAgICAgIGNvbnN0IGFnZ1ZhbHVlID0gYWdnLnZhbHVlKCk7XHJcbiAgICAgIHRvdGFsQ2VsbCA9IChcclxuICAgICAgICA8dGRcclxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXHJcbiAgICAgICAgICBrZXk9XCJ0b3RhbFwiXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXtyb3dUb3RhbENhbGxiYWNrc1tmbGF0Um93S2V5XX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XHJcbiAgICAgICAgPC90ZD5cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByb3dDZWxscyA9IFtcclxuICAgICAgLi4uYXR0clZhbHVlQ2VsbHMsXHJcbiAgICAgIGF0dHJWYWx1ZVBhZGRpbmdDZWxsLFxyXG4gICAgICAuLi52YWx1ZUNlbGxzLFxyXG4gICAgICB0b3RhbENlbGwsXHJcbiAgICBdO1xyXG5cclxuICAgIHJldHVybiA8dHIga2V5PXtga2V5Um93LSR7ZmxhdFJvd0tleX1gfT57cm93Q2VsbHN9PC90cj47XHJcbiAgfVxyXG5cclxuICByZW5kZXJUb3RhbHNSb3cocGl2b3RTZXR0aW5ncykge1xyXG4gICAgLy8gUmVuZGVyIHRoZSBmaW5hbCB0b3RhbHMgcm93cyB0aGF0IGhhcyB0aGUgdG90YWxzIGZvciBhbGwgdGhlIGNvbHVtbnMuXHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sQXR0cnMsXHJcbiAgICAgIHZpc2libGVDb2xLZXlzLFxyXG4gICAgICByb3dUb3RhbHMsXHJcbiAgICAgIHBpdm90RGF0YSxcclxuICAgICAgY29sVG90YWxDYWxsYmFja3MsXHJcbiAgICAgIGdyYW5kVG90YWxDYWxsYmFjayxcclxuICAgIH0gPSBwaXZvdFNldHRpbmdzO1xyXG5cclxuICAgIGNvbnN0IHRvdGFsTGFiZWxDZWxsID0gKFxyXG4gICAgICA8dGhcclxuICAgICAgICBrZXk9XCJsYWJlbFwiXHJcbiAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxMYWJlbCBwdnRSb3dUb3RhbExhYmVsXCJcclxuICAgICAgICBjb2xTcGFuPXtyb3dBdHRycy5sZW5ndGggKyBNYXRoLm1pbihjb2xBdHRycy5sZW5ndGgsIDEpfVxyXG4gICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgW10sXHJcbiAgICAgICAgICB0aGlzLnByb3BzLnJvd3MsXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgdHJ1ZSxcclxuICAgICAgICApfVxyXG4gICAgICA+XHJcbiAgICAgICAge2BUb3RhbCAoJHt0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lfSlgfVxyXG4gICAgICA8L3RoPlxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCB0b3RhbFZhbHVlQ2VsbHMgPSB2aXNpYmxlQ29sS2V5cy5tYXAoY29sS2V5ID0+IHtcclxuICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5KTtcclxuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3IoW10sIGNvbEtleSk7XHJcbiAgICAgIGNvbnN0IGFnZ1ZhbHVlID0gYWdnLnZhbHVlKCk7XHJcblxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDx0ZFxyXG4gICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsIHB2dFJvd1RvdGFsXCJcclxuICAgICAgICAgIGtleT17YHRvdGFsLSR7ZmxhdENvbEtleX1gfVxyXG4gICAgICAgICAgb25DbGljaz17Y29sVG90YWxDYWxsYmFja3NbZmxhdENvbEtleV19XHJcbiAgICAgICAgICBzdHlsZT17eyBwYWRkaW5nOiAnNXB4JyB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cclxuICAgICAgICA8L3RkPlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IGdyYW5kVG90YWxDZWxsID0gbnVsbDtcclxuICAgIGlmIChyb3dUb3RhbHMpIHtcclxuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3IoW10sIFtdKTtcclxuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcclxuICAgICAgZ3JhbmRUb3RhbENlbGwgPSAoXHJcbiAgICAgICAgPHRkXHJcbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxyXG4gICAgICAgICAga2V5PVwidG90YWxcIlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0R3JhbmRUb3RhbCBwdnRSb3dUb3RhbFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXtncmFuZFRvdGFsQ2FsbGJhY2t9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG90YWxDZWxscyA9IFt0b3RhbExhYmVsQ2VsbCwgLi4udG90YWxWYWx1ZUNlbGxzLCBncmFuZFRvdGFsQ2VsbF07XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHRyIGtleT1cInRvdGFsXCIgY2xhc3NOYW1lPVwicHZ0Um93VG90YWxzXCI+XHJcbiAgICAgICAge3RvdGFsQ2VsbHN9XHJcbiAgICAgIDwvdHI+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgdmlzaWJsZUtleXMoa2V5cywgY29sbGFwc2VkLCBudW1BdHRycywgc3VidG90YWxEaXNwbGF5KSB7XHJcbiAgICByZXR1cm4ga2V5cy5maWx0ZXIoXHJcbiAgICAgIGtleSA9PlxyXG4gICAgICAgIC8vIElzIHRoZSBrZXkgaGlkZGVuIGJ5IG9uZSBvZiBpdHMgcGFyZW50cz9cclxuICAgICAgICAha2V5LnNvbWUoKGssIGopID0+IGNvbGxhcHNlZFtmbGF0S2V5KGtleS5zbGljZSgwLCBqKSldKSAmJlxyXG4gICAgICAgIC8vIExlYWYga2V5LlxyXG4gICAgICAgIChrZXkubGVuZ3RoID09PSBudW1BdHRycyB8fFxyXG4gICAgICAgICAgLy8gQ2hpbGRyZW4gaGlkZGVuLiBNdXN0IHNob3cgdG90YWwuXHJcbiAgICAgICAgICBmbGF0S2V5KGtleSkgaW4gY29sbGFwc2VkIHx8XHJcbiAgICAgICAgICAvLyBEb24ndCBoaWRlIHRvdGFscy5cclxuICAgICAgICAgICFzdWJ0b3RhbERpc3BsYXkuaGlkZU9uRXhwYW5kKSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5jYWNoZWRQcm9wcyAhPT0gdGhpcy5wcm9wcykge1xyXG4gICAgICB0aGlzLmNhY2hlZFByb3BzID0gdGhpcy5wcm9wcztcclxuICAgICAgdGhpcy5jYWNoZWRCYXNlUGl2b3RTZXR0aW5ncyA9IHRoaXMuZ2V0QmFzZVBpdm90U2V0dGluZ3MoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHtcclxuICAgICAgY29sQXR0cnMsXHJcbiAgICAgIHJvd0F0dHJzLFxyXG4gICAgICByb3dLZXlzLFxyXG4gICAgICBjb2xLZXlzLFxyXG4gICAgICBjb2xUb3RhbHMsXHJcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgfSA9IHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3M7XHJcblxyXG4gICAgLy8gTmVlZCB0byBhY2NvdW50IGZvciBleGNsdXNpb25zIHRvIGNvbXB1dGUgdGhlIGVmZmVjdGl2ZSByb3dcclxuICAgIC8vIGFuZCBjb2x1bW4ga2V5cy5cclxuICAgIGNvbnN0IHZpc2libGVSb3dLZXlzID0gdGhpcy52aXNpYmxlS2V5cyhcclxuICAgICAgcm93S2V5cyxcclxuICAgICAgdGhpcy5zdGF0ZS5jb2xsYXBzZWRSb3dzLFxyXG4gICAgICByb3dBdHRycy5sZW5ndGgsXHJcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgICk7XHJcbiAgICBjb25zdCB2aXNpYmxlQ29sS2V5cyA9IHRoaXMudmlzaWJsZUtleXMoXHJcbiAgICAgIGNvbEtleXMsXHJcbiAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkQ29scyxcclxuICAgICAgY29sQXR0cnMubGVuZ3RoLFxyXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHBpdm90U2V0dGluZ3MgPSB7XHJcbiAgICAgIHZpc2libGVSb3dLZXlzLFxyXG4gICAgICBtYXhSb3dWaXNpYmxlOiBNYXRoLm1heCguLi52aXNpYmxlUm93S2V5cy5tYXAoayA9PiBrLmxlbmd0aCkpLFxyXG4gICAgICB2aXNpYmxlQ29sS2V5cyxcclxuICAgICAgbWF4Q29sVmlzaWJsZTogTWF0aC5tYXgoLi4udmlzaWJsZUNvbEtleXMubWFwKGsgPT4gay5sZW5ndGgpKSxcclxuICAgICAgcm93QXR0clNwYW5zOiB0aGlzLmNhbGNBdHRyU3BhbnModmlzaWJsZVJvd0tleXMsIHJvd0F0dHJzLmxlbmd0aCksXHJcbiAgICAgIGNvbEF0dHJTcGFuczogdGhpcy5jYWxjQXR0clNwYW5zKHZpc2libGVDb2xLZXlzLCBjb2xBdHRycy5sZW5ndGgpLFxyXG4gICAgICAuLi50aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8U3R5bGVzPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJwdnRUYWJsZVwiIHJvbGU9XCJncmlkXCI+XHJcbiAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgIHtjb2xBdHRycy5tYXAoKGMsIGopID0+XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb2xIZWFkZXJSb3coYywgaiwgcGl2b3RTZXR0aW5ncyksXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIHtyb3dBdHRycy5sZW5ndGggIT09IDAgJiYgdGhpcy5yZW5kZXJSb3dIZWFkZXJSb3cocGl2b3RTZXR0aW5ncyl9XHJcbiAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICB7dmlzaWJsZVJvd0tleXMubWFwKChyLCBpKSA9PlxyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyVGFibGVSb3cociwgaSwgcGl2b3RTZXR0aW5ncyksXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIHtjb2xUb3RhbHMgJiYgdGhpcy5yZW5kZXJUb3RhbHNSb3cocGl2b3RTZXR0aW5ncyl9XHJcbiAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICAgIDwvU3R5bGVzPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcblRhYmxlUmVuZGVyZXIucHJvcFR5cGVzID0ge1xyXG4gIC4uLlBpdm90RGF0YS5wcm9wVHlwZXMsXHJcbiAgdGFibGVPcHRpb25zOiBQcm9wVHlwZXMub2JqZWN0LFxyXG59O1xyXG5UYWJsZVJlbmRlcmVyLmRlZmF1bHRQcm9wcyA9IHsgLi4uUGl2b3REYXRhLmRlZmF1bHRQcm9wcywgdGFibGVPcHRpb25zOiB7fSB9O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js":
/*!****************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"aggregatorTemplates\": () => (/* binding */ aggregatorTemplates),\n/* harmony export */   \"sortAs\": () => (/* binding */ sortAs),\n/* harmony export */   \"flatKey\": () => (/* binding */ flatKey),\n/* harmony export */   \"PivotData\": () => (/* binding */ PivotData)\n/* harmony export */ });\n/* unused harmony exports aggregators, derivers, locales, naturalSort, numberFormat, getSort */\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\nconst addSeparators = function (nStr, thousandsSep, decimalSep) {\n  const x = String(nStr).split('.');\n  let x1 = x[0];\n  const x2 = x.length > 1 ? decimalSep + x[1] : '';\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, `$1${thousandsSep}$2`);\n  }\n  return x1 + x2;\n};\n\nconst numberFormat = function (optsIn) {\n  const defaults = {\n    digitsAfterDecimal: 2,\n    scaler: 1,\n    thousandsSep: ',',\n    decimalSep: '.',\n    prefix: '',\n    suffix: '' };\n\n  const opts = { ...defaults, ...optsIn };\n  return function (x) {\n    if (Number.isNaN(x) || !Number.isFinite(x)) {\n      return '';\n    }\n    const result = addSeparators(\n    (opts.scaler * x).toFixed(opts.digitsAfterDecimal),\n    opts.thousandsSep,\n    opts.decimalSep);\n\n    return `${opts.prefix}${result}${opts.suffix}`;\n  };\n};\n\nconst rx = /(\\d+)|(\\D+)/g;\nconst rd = /\\d/;\nconst rz = /^0/;\nconst naturalSort = (as, bs) => {\n  // nulls first\n  if (bs !== null && as === null) {\n    return -1;\n  }\n  if (as !== null && bs === null) {\n    return 1;\n  }\n\n  // then raw NaNs\n  if (typeof as === 'number' && Number.isNaN(as)) {\n    return -1;\n  }\n  if (typeof bs === 'number' && Number.isNaN(bs)) {\n    return 1;\n  }\n\n  // numbers and numbery strings group together\n  const nas = Number(as);\n  const nbs = Number(bs);\n  if (nas < nbs) {\n    return -1;\n  }\n  if (nas > nbs) {\n    return 1;\n  }\n\n  // within that, true numbers before numbery strings\n  if (typeof as === 'number' && typeof bs !== 'number') {\n    return -1;\n  }\n  if (typeof bs === 'number' && typeof as !== 'number') {\n    return 1;\n  }\n  if (typeof as === 'number' && typeof bs === 'number') {\n    return 0;\n  }\n\n  // 'Infinity' is a textual number, so less than 'A'\n  if (Number.isNaN(nbs) && !Number.isNaN(nas)) {\n    return -1;\n  }\n  if (Number.isNaN(nas) && !Number.isNaN(nbs)) {\n    return 1;\n  }\n\n  // finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n  let a = String(as);\n  let b = String(bs);\n  if (a === b) {\n    return 0;\n  }\n  if (!rd.test(a) || !rd.test(b)) {\n    return a > b ? 1 : -1;\n  }\n\n  // special treatment for strings containing digits\n  a = a.match(rx);\n  b = b.match(rx);\n  while (a.length && b.length) {\n    const a1 = a.shift();\n    const b1 = b.shift();\n    if (a1 !== b1) {\n      if (rd.test(a1) && rd.test(b1)) {\n        return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n      }\n      return a1 > b1 ? 1 : -1;\n    }\n  }\n  return a.length - b.length;\n};\n\nconst sortAs = function (order) {\n  const mapping = {};\n\n  // sort lowercased keys similarly\n  const lMapping = {};\n  order.forEach((element, i) => {\n    mapping[element] = i;\n    if (typeof element === 'string') {\n      lMapping[element.toLowerCase()] = i;\n    }\n  });\n  return function (a, b) {\n    if (a in mapping && b in mapping) {\n      return mapping[a] - mapping[b];\n    }\n    if (a in mapping) {\n      return -1;\n    }\n    if (b in mapping) {\n      return 1;\n    }\n    if (a in lMapping && b in lMapping) {\n      return lMapping[a] - lMapping[b];\n    }\n    if (a in lMapping) {\n      return -1;\n    }\n    if (b in lMapping) {\n      return 1;\n    }\n    return naturalSort(a, b);\n  };\n};\n\nconst getSort = function (sorters, attr) {\n  if (sorters) {\n    if (typeof sorters === 'function') {\n      const sort = sorters(attr);\n      if (typeof sort === 'function') {\n        return sort;\n      }\n    } else if (attr in sorters) {\n      return sorters[attr];\n    }\n  }\n  return naturalSort;\n};\n\n// aggregator templates default to US number formatting but this is overrideable\nconst usFmt = numberFormat();\nconst usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\nconst usFmtPct = numberFormat({\n  digitsAfterDecimal: 1,\n  scaler: 100,\n  suffix: '%' });\n\n\nconst baseAggregatorTemplates = {\n  count(formatter = usFmtInt) {\n    return () =>\n    function () {\n      return {\n        count: 0,\n        push() {\n          this.count += 1;\n        },\n        value() {\n          return this.count;\n        },\n        format: formatter };\n\n    };\n  },\n\n  uniques(fn, formatter = usFmtInt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          uniq: [],\n          push(record) {\n            if (!Array.from(this.uniq).includes(record[attr])) {\n              this.uniq.push(record[attr]);\n            }\n          },\n          value() {\n            return fn(this.uniq);\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  sum(formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          sum: 0,\n          push(record) {\n            if (!Number.isNaN(parseFloat(record[attr]))) {\n              this.sum += parseFloat(record[attr]);\n            }\n          },\n          value() {\n            return this.sum;\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  extremes(mode, formatter = usFmt) {\n    return function ([attr]) {\n      return function (data) {\n        return {\n          val: null,\n          sorter: getSort(\n          typeof data !== 'undefined' ? data.sorters : null,\n          attr),\n\n          push(record) {\n            let x = record[attr];\n            if (['min', 'max'].includes(mode)) {\n              x = parseFloat(x);\n              if (!Number.isNaN(x)) {\n                this.val = Math[mode](x, this.val !== null ? this.val : x);\n              }\n            }\n            if (\n            mode === 'first' &&\n            this.sorter(x, this.val !== null ? this.val : x) <= 0)\n            {\n              this.val = x;\n            }\n            if (\n            mode === 'last' &&\n            this.sorter(x, this.val !== null ? this.val : x) >= 0)\n            {\n              this.val = x;\n            }\n          },\n          value() {\n            return this.val;\n          },\n          format(x) {\n            if (Number.isNaN(x)) {\n              return x;\n            }\n            return formatter(x);\n          },\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  quantile(q, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          vals: [],\n          push(record) {\n            const x = parseFloat(record[attr]);\n            if (!Number.isNaN(x)) {\n              this.vals.push(x);\n            }\n          },\n          value() {\n            if (this.vals.length === 0) {\n              return null;\n            }\n            this.vals.sort((a, b) => a - b);\n            const i = (this.vals.length - 1) * q;\n            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  runningStat(mode = 'mean', ddof = 1, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          n: 0.0,\n          m: 0.0,\n          s: 0.0,\n          push(record) {\n            const x = parseFloat(record[attr]);\n            if (Number.isNaN(x)) {\n              return;\n            }\n            this.n += 1.0;\n            if (this.n === 1.0) {\n              this.m = x;\n            }\n            const mNew = this.m + (x - this.m) / this.n;\n            this.s += (x - this.m) * (x - mNew);\n            this.m = mNew;\n          },\n          value() {\n            if (mode === 'mean') {\n              if (this.n === 0) {\n                return 0 / 0;\n              }\n              return this.m;\n            }\n            if (this.n <= ddof) {\n              return 0;\n            }\n            switch (mode) {\n              case 'var':\n                return this.s / (this.n - ddof);\n              case 'stdev':\n                return Math.sqrt(this.s / (this.n - ddof));\n              default:\n                throw new Error('unknown mode for runningStat');}\n\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  sumOverSum(formatter = usFmt) {\n    return function ([num, denom]) {\n      return function () {\n        return {\n          sumNum: 0,\n          sumDenom: 0,\n          push(record) {\n            if (!Number.isNaN(parseFloat(record[num]))) {\n              this.sumNum += parseFloat(record[num]);\n            }\n            if (!Number.isNaN(parseFloat(record[denom]))) {\n              this.sumDenom += parseFloat(record[denom]);\n            }\n          },\n          value() {\n            return this.sumNum / this.sumDenom;\n          },\n          format: formatter,\n          numInputs:\n          typeof num !== 'undefined' && typeof denom !== 'undefined' ? 0 : 2 };\n\n      };\n    };\n  },\n\n  fractionOf(wrapped, type = 'total', formatter = usFmtPct) {\n    return (...x) =>\n    function (data, rowKey, colKey) {\n      return {\n        selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[\n        type],\n\n        inner: wrapped(...Array.from(x || []))(data, rowKey, colKey),\n        push(record) {\n          this.inner.push(record);\n        },\n        format: formatter,\n        value() {\n          return (\n            this.inner.value() /\n            data.\n            getAggregator(...Array.from(this.selector || [])).\n            inner.value());\n\n        },\n        numInputs: wrapped(...Array.from(x || []))().numInputs };\n\n    };\n  } };\n\n\nconst extendedAggregatorTemplates = {\n  countUnique(f) {\n    return baseAggregatorTemplates.uniques((x) => x.length, f);\n  },\n  listUnique(s, f) {\n    return baseAggregatorTemplates.uniques((x) => x.join(s), f || ((x) => x));\n  },\n  max(f) {\n    return baseAggregatorTemplates.extremes('max', f);\n  },\n  min(f) {\n    return baseAggregatorTemplates.extremes('min', f);\n  },\n  first(f) {\n    return baseAggregatorTemplates.extremes('first', f);\n  },\n  last(f) {\n    return baseAggregatorTemplates.extremes('last', f);\n  },\n  median(f) {\n    return baseAggregatorTemplates.quantile(0.5, f);\n  },\n  average(f) {\n    return baseAggregatorTemplates.runningStat('mean', 1, f);\n  },\n  var(ddof, f) {\n    return baseAggregatorTemplates.runningStat('var', ddof, f);\n  },\n  stdev(ddof, f) {\n    return baseAggregatorTemplates.runningStat('stdev', ddof, f);\n  } };\n\n\nconst aggregatorTemplates = {\n  ...baseAggregatorTemplates,\n  ...extendedAggregatorTemplates };\n\n\n// default aggregators & renderers use US naming and number formatting\nconst aggregators = ((tpl) => ({\n  Count: tpl.count(usFmtInt),\n  'Count Unique Values': tpl.countUnique(usFmtInt),\n  'List Unique Values': tpl.listUnique(', '),\n  Sum: tpl.sum(usFmt),\n  'Integer Sum': tpl.sum(usFmtInt),\n  Average: tpl.average(usFmt),\n  Median: tpl.median(usFmt),\n  'Sample Variance': tpl.var(1, usFmt),\n  'Sample Standard Deviation': tpl.stdev(1, usFmt),\n  Minimum: tpl.min(usFmt),\n  Maximum: tpl.max(usFmt),\n  First: tpl.first(usFmt),\n  Last: tpl.last(usFmt),\n  'Sum over Sum': tpl.sumOverSum(usFmt),\n  'Sum as Fraction of Total': tpl.fractionOf(tpl.sum(), 'total', usFmtPct),\n  'Sum as Fraction of Rows': tpl.fractionOf(tpl.sum(), 'row', usFmtPct),\n  'Sum as Fraction of Columns': tpl.fractionOf(tpl.sum(), 'col', usFmtPct),\n  'Count as Fraction of Total': tpl.fractionOf(tpl.count(), 'total', usFmtPct),\n  'Count as Fraction of Rows': tpl.fractionOf(tpl.count(), 'row', usFmtPct),\n  'Count as Fraction of Columns': tpl.fractionOf(tpl.count(), 'col', usFmtPct) }))(\naggregatorTemplates);\n\nconst locales = {\n  en: {\n    aggregators,\n    localeStrings: {\n      renderError: 'An error occurred rendering the PivotTable results.',\n      computeError: 'An error occurred computing the PivotTable results.',\n      uiRenderError: 'An error occurred rendering the PivotTable UI.',\n      selectAll: 'Select All',\n      selectNone: 'Select None',\n      tooMany: '(too many to list)',\n      filterResults: 'Filter values',\n      apply: 'Apply',\n      cancel: 'Cancel',\n      totals: 'Totals',\n      vs: 'vs',\n      by: 'by' } } };\n\n\n\n\n// dateFormat deriver l10n requires month and day names to be passed in directly\nconst mthNamesEn = [\n'Jan',\n'Feb',\n'Mar',\n'Apr',\n'May',\n'Jun',\n'Jul',\n'Aug',\n'Sep',\n'Oct',\n'Nov',\n'Dec'];\n\nconst dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst zeroPad = (number) => `0${number}`.substr(-2, 2); // eslint-disable-line no-magic-numbers\n\nconst derivers = {\n  bin(col, binWidth) {\n    return (record) => record[col] - record[col] % binWidth;\n  },\n  dateFormat(\n  col,\n  formatString,\n  utcOutput = false,\n  mthNames = mthNamesEn,\n  dayNames = dayNamesEn)\n  {\n    const utc = utcOutput ? 'UTC' : '';\n    return function (record) {\n      const date = new Date(Date.parse(record[col]));\n      if (Number.isNaN(date)) {\n        return '';\n      }\n      return formatString.replace(/%(.)/g, function (m, p) {\n        switch (p) {\n          case 'y':\n            return date[`get${utc}FullYear`]();\n          case 'm':\n            return zeroPad(date[`get${utc}Month`]() + 1);\n          case 'n':\n            return mthNames[date[`get${utc}Month`]()];\n          case 'd':\n            return zeroPad(date[`get${utc}Date`]());\n          case 'w':\n            return dayNames[date[`get${utc}Day`]()];\n          case 'x':\n            return date[`get${utc}Day`]();\n          case 'H':\n            return zeroPad(date[`get${utc}Hours`]());\n          case 'M':\n            return zeroPad(date[`get${utc}Minutes`]());\n          case 'S':\n            return zeroPad(date[`get${utc}Seconds`]());\n          default:\n            return `%${p}`;}\n\n      });\n    };\n  } };\n\n\n// Given an array of attribute values, convert to a key that\n// can be used in objects.\nconst flatKey = (attrVals) => attrVals.join(String.fromCharCode(0));\n\n/*\r\nData Model class\r\n*/\n\nclass PivotData {\n  constructor(inputProps = {}, subtotals = {}) {\n    this.props = { ...PivotData.defaultProps, ...inputProps };\n    this.processRecord = this.processRecord.bind(this);\n    prop_types__WEBPACK_IMPORTED_MODULE_0___default().checkPropTypes(\n    PivotData.propTypes,\n    this.props,\n    'prop',\n    'PivotData');\n\n\n    this.aggregator = this.props.\n    aggregatorsFactory(this.props.defaultFormatter)[\n    this.props.aggregatorName](this.props.vals);\n    this.formattedAggregators =\n    this.props.customFormatters &&\n    Object.entries(this.props.customFormatters).reduce(\n    (acc, [key, columnFormatter]) => {\n      acc[key] = {};\n      Object.entries(columnFormatter).forEach(([column, formatter]) => {\n        acc[key][column] = this.props.\n        aggregatorsFactory(formatter)[\n        this.props.aggregatorName](this.props.vals);\n      });\n      return acc;\n    },\n    {});\n\n    this.tree = {};\n    this.rowKeys = [];\n    this.colKeys = [];\n    this.rowTotals = {};\n    this.colTotals = {};\n    this.allTotal = this.aggregator(this, [], []);\n    this.subtotals = subtotals;\n    this.sorted = false;\n\n    // iterate through input, accumulating data for cells\n    PivotData.forEachRecord(this.props.data, this.processRecord);\n  }\n\n  getFormattedAggregator(record, totalsKeys) {\n    if (!this.formattedAggregators) {\n      return this.aggregator;\n    }\n    const [groupName, groupValue] =\n    Object.entries(record).find(\n    ([name, value]) =>\n    this.formattedAggregators[name] &&\n    this.formattedAggregators[name][value]) ||\n    [];\n    if (\n    !groupName ||\n    !groupValue ||\n    totalsKeys && !totalsKeys.includes(groupValue))\n    {\n      return this.aggregator;\n    }\n    return this.formattedAggregators[groupName][groupValue] || this.aggregator;\n  }\n\n  arrSort(attrs, partialOnTop, reverse = false) {\n    const sortersArr = attrs.map((a) => getSort(this.props.sorters, a));\n    return function (a, b) {\n      const limit = Math.min(a.length, b.length);\n      for (let i = 0; i < limit; i += 1) {\n        const sorter = sortersArr[i];\n        const comparison = reverse ? sorter(b[i], a[i]) : sorter(a[i], b[i]);\n        if (comparison !== 0) {\n          return comparison;\n        }\n      }\n      return partialOnTop ? a.length - b.length : b.length - a.length;\n    };\n  }\n\n  sortKeys() {\n    if (!this.sorted) {\n      this.sorted = true;\n      const v = (r, c) => this.getAggregator(r, c).value();\n      switch (this.props.rowOrder) {\n        case 'key_z_to_a':\n          this.rowKeys.sort(\n          this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop, true));\n\n          break;\n        case 'value_a_to_z':\n          this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n          break;\n        case 'value_z_to_a':\n          this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n          break;\n        default:\n          this.rowKeys.sort(\n          this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop));}\n\n\n      switch (this.props.colOrder) {\n        case 'key_z_to_a':\n          this.colKeys.sort(\n          this.arrSort(this.props.cols, this.subtotals.colPartialOnTop, true));\n\n          break;\n        case 'value_a_to_z':\n          this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n          break;\n        case 'value_z_to_a':\n          this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n          break;\n        default:\n          this.colKeys.sort(\n          this.arrSort(this.props.cols, this.subtotals.colPartialOnTop));}\n\n\n    }\n  }\n\n  getColKeys() {\n    this.sortKeys();\n    return this.colKeys;\n  }\n\n  getRowKeys() {\n    this.sortKeys();\n    return this.rowKeys;\n  }\n\n  processRecord(record) {\n    // this code is called in a tight loop\n    const colKey = [];\n    const rowKey = [];\n    this.props.cols.forEach((col) => {\n      colKey.push(col in record ? record[col] : 'null');\n    });\n    this.props.rows.forEach((row) => {\n      rowKey.push(row in record ? record[row] : 'null');\n    });\n\n    this.allTotal.push(record);\n\n    const rowStart = this.subtotals.rowEnabled ? 1 : Math.max(1, rowKey.length);\n    const colStart = this.subtotals.colEnabled ? 1 : Math.max(1, colKey.length);\n\n    let isRowSubtotal;\n    let isColSubtotal;\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.rowTotals[flatRowKey]) {\n        this.rowKeys.push(fRowKey);\n        this.rowTotals[flatRowKey] = this.getFormattedAggregator(\n        record,\n        rowKey)(\n        this, fRowKey, []);\n      }\n      this.rowTotals[flatRowKey].push(record);\n      this.rowTotals[flatRowKey].isSubtotal = isRowSubtotal;\n    }\n\n    for (let ci = colStart; ci <= colKey.length; ci += 1) {\n      isColSubtotal = ci < colKey.length;\n      const fColKey = colKey.slice(0, ci);\n      const flatColKey = flatKey(fColKey);\n      if (!this.colTotals[flatColKey]) {\n        this.colKeys.push(fColKey);\n        this.colTotals[flatColKey] = this.getFormattedAggregator(\n        record,\n        colKey)(\n        this, [], fColKey);\n      }\n      this.colTotals[flatColKey].push(record);\n      this.colTotals[flatColKey].isSubtotal = isColSubtotal;\n    }\n\n    // And now fill in for all the sub-cells.\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.tree[flatRowKey]) {\n        this.tree[flatRowKey] = {};\n      }\n      for (let ci = colStart; ci <= colKey.length; ci += 1) {\n        isColSubtotal = ci < colKey.length;\n        const fColKey = colKey.slice(0, ci);\n        const flatColKey = flatKey(fColKey);\n        if (!this.tree[flatRowKey][flatColKey]) {\n          this.tree[flatRowKey][flatColKey] = this.getFormattedAggregator(\n          record)(\n          this, fRowKey, fColKey);\n        }\n        this.tree[flatRowKey][flatColKey].push(record);\n\n        this.tree[flatRowKey][flatColKey].isRowSubtotal = isRowSubtotal;\n        this.tree[flatRowKey][flatColKey].isColSubtotal = isColSubtotal;\n        this.tree[flatRowKey][flatColKey].isSubtotal =\n        isRowSubtotal || isColSubtotal;\n      }\n    }\n  }\n\n  getAggregator(rowKey, colKey) {\n    let agg;\n    const flatRowKey = flatKey(rowKey);\n    const flatColKey = flatKey(colKey);\n    if (rowKey.length === 0 && colKey.length === 0) {\n      agg = this.allTotal;\n    } else if (rowKey.length === 0) {\n      agg = this.colTotals[flatColKey];\n    } else if (colKey.length === 0) {\n      agg = this.rowTotals[flatRowKey];\n    } else {\n      agg = this.tree[flatRowKey][flatColKey];\n    }\n    return (\n      agg || {\n        value() {\n          return null;\n        },\n        format() {\n          return '';\n        } });\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n// can handle arrays or jQuery selections of tables\nPivotData.forEachRecord = function (input, processRecord) {\n  if (Array.isArray(input)) {\n    // array of objects\n    return input.map((record) => processRecord(record));\n  }\n  throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Unknown input format'));\n};\n\nPivotData.defaultProps = {\n  aggregators,\n  cols: [],\n  rows: [],\n  vals: [],\n  aggregatorName: 'Count',\n  sorters: {},\n  rowOrder: 'key_a_to_z',\n  colOrder: 'key_a_to_z' };\n\n\nPivotData.propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_0___default().array), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)]).\n  isRequired,\n  aggregatorName: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  cols: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  rows: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  vals: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  valueFilter: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool))),\n  sorters: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([\n  (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func),\n  prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func))]),\n\n  derivedAttributes: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)),\n  rowOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']),\n\n  colOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']) };\n\n\n\n;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(addSeparators, \"addSeparators\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(numberFormat, \"numberFormat\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rx, \"rx\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rd, \"rd\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rz, \"rz\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(naturalSort, \"naturalSort\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(sortAs, \"sortAs\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(getSort, \"getSort\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmt, \"usFmt\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmtInt, \"usFmtInt\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmtPct, \"usFmtPct\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(baseAggregatorTemplates, \"baseAggregatorTemplates\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(extendedAggregatorTemplates, \"extendedAggregatorTemplates\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(aggregatorTemplates, \"aggregatorTemplates\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(aggregators, \"aggregators\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(locales, \"locales\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(mthNamesEn, \"mthNamesEn\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(dayNamesEn, \"dayNamesEn\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(zeroPad, \"zeroPad\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(derivers, \"derivers\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(flatKey, \"flatKey\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(PivotData, \"PivotData\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBak9BO0FBQUE7QUFvT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFjQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvdXRpbGl0aWVzLmpzP2JmNTgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCB7IHQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XHJcblxyXG5jb25zdCBhZGRTZXBhcmF0b3JzID0gZnVuY3Rpb24gKG5TdHIsIHRob3VzYW5kc1NlcCwgZGVjaW1hbFNlcCkge1xyXG4gIGNvbnN0IHggPSBTdHJpbmcoblN0cikuc3BsaXQoJy4nKTtcclxuICBsZXQgeDEgPSB4WzBdO1xyXG4gIGNvbnN0IHgyID0geC5sZW5ndGggPiAxID8gZGVjaW1hbFNlcCArIHhbMV0gOiAnJztcclxuICBjb25zdCByZ3ggPSAvKFxcZCspKFxcZHszfSkvO1xyXG4gIHdoaWxlIChyZ3gudGVzdCh4MSkpIHtcclxuICAgIHgxID0geDEucmVwbGFjZShyZ3gsIGAkMSR7dGhvdXNhbmRzU2VwfSQyYCk7XHJcbiAgfVxyXG4gIHJldHVybiB4MSArIHgyO1xyXG59O1xyXG5cclxuY29uc3QgbnVtYmVyRm9ybWF0ID0gZnVuY3Rpb24gKG9wdHNJbikge1xyXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAyLFxyXG4gICAgc2NhbGVyOiAxLFxyXG4gICAgdGhvdXNhbmRzU2VwOiAnLCcsXHJcbiAgICBkZWNpbWFsU2VwOiAnLicsXHJcbiAgICBwcmVmaXg6ICcnLFxyXG4gICAgc3VmZml4OiAnJyxcclxuICB9O1xyXG4gIGNvbnN0IG9wdHMgPSB7IC4uLmRlZmF1bHRzLCAuLi5vcHRzSW4gfTtcclxuICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4oeCkgfHwgIU51bWJlci5pc0Zpbml0ZSh4KSkge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXN1bHQgPSBhZGRTZXBhcmF0b3JzKFxyXG4gICAgICAob3B0cy5zY2FsZXIgKiB4KS50b0ZpeGVkKG9wdHMuZGlnaXRzQWZ0ZXJEZWNpbWFsKSxcclxuICAgICAgb3B0cy50aG91c2FuZHNTZXAsXHJcbiAgICAgIG9wdHMuZGVjaW1hbFNlcCxcclxuICAgICk7XHJcbiAgICByZXR1cm4gYCR7b3B0cy5wcmVmaXh9JHtyZXN1bHR9JHtvcHRzLnN1ZmZpeH1gO1xyXG4gIH07XHJcbn07XHJcblxyXG5jb25zdCByeCA9IC8oXFxkKyl8KFxcRCspL2c7XHJcbmNvbnN0IHJkID0gL1xcZC87XHJcbmNvbnN0IHJ6ID0gL14wLztcclxuY29uc3QgbmF0dXJhbFNvcnQgPSAoYXMsIGJzKSA9PiB7XHJcbiAgLy8gbnVsbHMgZmlyc3RcclxuICBpZiAoYnMgIT09IG51bGwgJiYgYXMgPT09IG51bGwpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKGFzICE9PSBudWxsICYmIGJzID09PSBudWxsKSB7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIC8vIHRoZW4gcmF3IE5hTnNcclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNOYU4oYXMpKSB7XHJcbiAgICByZXR1cm4gLTE7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgYnMgPT09ICdudW1iZXInICYmIE51bWJlci5pc05hTihicykpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgLy8gbnVtYmVycyBhbmQgbnVtYmVyeSBzdHJpbmdzIGdyb3VwIHRvZ2V0aGVyXHJcbiAgY29uc3QgbmFzID0gTnVtYmVyKGFzKTtcclxuICBjb25zdCBuYnMgPSBOdW1iZXIoYnMpO1xyXG4gIGlmIChuYXMgPCBuYnMpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKG5hcyA+IG5icykge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICAvLyB3aXRoaW4gdGhhdCwgdHJ1ZSBudW1iZXJzIGJlZm9yZSBudW1iZXJ5IHN0cmluZ3NcclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYnMgIT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gLTE7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgYnMgPT09ICdudW1iZXInICYmIHR5cGVvZiBhcyAhPT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIGFzID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYnMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIC8vICdJbmZpbml0eScgaXMgYSB0ZXh0dWFsIG51bWJlciwgc28gbGVzcyB0aGFuICdBJ1xyXG4gIGlmIChOdW1iZXIuaXNOYU4obmJzKSAmJiAhTnVtYmVyLmlzTmFOKG5hcykpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKE51bWJlci5pc05hTihuYXMpICYmICFOdW1iZXIuaXNOYU4obmJzKSkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICAvLyBmaW5hbGx5LCBcInNtYXJ0XCIgc3RyaW5nIHNvcnRpbmcgcGVyIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQzNzM0MjEvMTEyODcxXHJcbiAgbGV0IGEgPSBTdHJpbmcoYXMpO1xyXG4gIGxldCBiID0gU3RyaW5nKGJzKTtcclxuICBpZiAoYSA9PT0gYikge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG4gIGlmICghcmQudGVzdChhKSB8fCAhcmQudGVzdChiKSkge1xyXG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IC0xO1xyXG4gIH1cclxuXHJcbiAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIHN0cmluZ3MgY29udGFpbmluZyBkaWdpdHNcclxuICBhID0gYS5tYXRjaChyeCk7XHJcbiAgYiA9IGIubWF0Y2gocngpO1xyXG4gIHdoaWxlIChhLmxlbmd0aCAmJiBiLmxlbmd0aCkge1xyXG4gICAgY29uc3QgYTEgPSBhLnNoaWZ0KCk7XHJcbiAgICBjb25zdCBiMSA9IGIuc2hpZnQoKTtcclxuICAgIGlmIChhMSAhPT0gYjEpIHtcclxuICAgICAgaWYgKHJkLnRlc3QoYTEpICYmIHJkLnRlc3QoYjEpKSB7XHJcbiAgICAgICAgcmV0dXJuIGExLnJlcGxhY2UocnosICcuMCcpIC0gYjEucmVwbGFjZShyeiwgJy4wJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGExID4gYjEgPyAxIDogLTE7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBhLmxlbmd0aCAtIGIubGVuZ3RoO1xyXG59O1xyXG5cclxuY29uc3Qgc29ydEFzID0gZnVuY3Rpb24gKG9yZGVyKSB7XHJcbiAgY29uc3QgbWFwcGluZyA9IHt9O1xyXG5cclxuICAvLyBzb3J0IGxvd2VyY2FzZWQga2V5cyBzaW1pbGFybHlcclxuICBjb25zdCBsTWFwcGluZyA9IHt9O1xyXG4gIG9yZGVyLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcclxuICAgIG1hcHBpbmdbZWxlbWVudF0gPSBpO1xyXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICBsTWFwcGluZ1tlbGVtZW50LnRvTG93ZXJDYXNlKCldID0gaTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIGlmIChhIGluIG1hcHBpbmcgJiYgYiBpbiBtYXBwaW5nKSB7XHJcbiAgICAgIHJldHVybiBtYXBwaW5nW2FdIC0gbWFwcGluZ1tiXTtcclxuICAgIH1cclxuICAgIGlmIChhIGluIG1hcHBpbmcpIHtcclxuICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKGIgaW4gbWFwcGluZykge1xyXG4gICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIGlmIChhIGluIGxNYXBwaW5nICYmIGIgaW4gbE1hcHBpbmcpIHtcclxuICAgICAgcmV0dXJuIGxNYXBwaW5nW2FdIC0gbE1hcHBpbmdbYl07XHJcbiAgICB9XHJcbiAgICBpZiAoYSBpbiBsTWFwcGluZykge1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAoYiBpbiBsTWFwcGluZykge1xyXG4gICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYXR1cmFsU29ydChhLCBiKTtcclxuICB9O1xyXG59O1xyXG5cclxuY29uc3QgZ2V0U29ydCA9IGZ1bmN0aW9uIChzb3J0ZXJzLCBhdHRyKSB7XHJcbiAgaWYgKHNvcnRlcnMpIHtcclxuICAgIGlmICh0eXBlb2Ygc29ydGVycyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBjb25zdCBzb3J0ID0gc29ydGVycyhhdHRyKTtcclxuICAgICAgaWYgKHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvcnQ7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYXR0ciBpbiBzb3J0ZXJzKSB7XHJcbiAgICAgIHJldHVybiBzb3J0ZXJzW2F0dHJdO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbmF0dXJhbFNvcnQ7XHJcbn07XHJcblxyXG4vLyBhZ2dyZWdhdG9yIHRlbXBsYXRlcyBkZWZhdWx0IHRvIFVTIG51bWJlciBmb3JtYXR0aW5nIGJ1dCB0aGlzIGlzIG92ZXJyaWRlYWJsZVxyXG5jb25zdCB1c0ZtdCA9IG51bWJlckZvcm1hdCgpO1xyXG5jb25zdCB1c0ZtdEludCA9IG51bWJlckZvcm1hdCh7IGRpZ2l0c0FmdGVyRGVjaW1hbDogMCB9KTtcclxuY29uc3QgdXNGbXRQY3QgPSBudW1iZXJGb3JtYXQoe1xyXG4gIGRpZ2l0c0FmdGVyRGVjaW1hbDogMSxcclxuICBzY2FsZXI6IDEwMCxcclxuICBzdWZmaXg6ICclJyxcclxufSk7XHJcblxyXG5jb25zdCBiYXNlQWdncmVnYXRvclRlbXBsYXRlcyA9IHtcclxuICBjb3VudChmb3JtYXR0ZXIgPSB1c0ZtdEludCkge1xyXG4gICAgcmV0dXJuICgpID0+XHJcbiAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICBwdXNoKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvdW50O1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgfSxcclxuXHJcbiAgdW5pcXVlcyhmbiwgZm9ybWF0dGVyID0gdXNGbXRJbnQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHVuaXE6IFtdLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5mcm9tKHRoaXMudW5pcSkuaW5jbHVkZXMocmVjb3JkW2F0dHJdKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMudW5pcS5wdXNoKHJlY29yZFthdHRyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuKHRoaXMudW5pcSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHN1bShmb3JtYXR0ZXIgPSB1c0ZtdCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VtOiAwLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VGbG9hdChyZWNvcmRbYXR0cl0pKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3VtICs9IHBhcnNlRmxvYXQocmVjb3JkW2F0dHJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdW07XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGV4dHJlbWVzKG1vZGUsIGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsOiBudWxsLFxyXG4gICAgICAgICAgc29ydGVyOiBnZXRTb3J0KFxyXG4gICAgICAgICAgICB0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhLnNvcnRlcnMgOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRyLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGxldCB4ID0gcmVjb3JkW2F0dHJdO1xyXG4gICAgICAgICAgICBpZiAoWydtaW4nLCAnbWF4J10uaW5jbHVkZXMobW9kZSkpIHtcclxuICAgICAgICAgICAgICB4ID0gcGFyc2VGbG9hdCh4KTtcclxuICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTih4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWwgPSBNYXRoW21vZGVdKHgsIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiB4KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIG1vZGUgPT09ICdmaXJzdCcgJiZcclxuICAgICAgICAgICAgICB0aGlzLnNvcnRlcih4LCB0aGlzLnZhbCAhPT0gbnVsbCA/IHRoaXMudmFsIDogeCkgPD0gMFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLnZhbCA9IHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIG1vZGUgPT09ICdsYXN0JyAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuc29ydGVyKHgsIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiB4KSA+PSAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMudmFsID0geDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWw7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0KHgpIHtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTih4KSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXIoeCk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBxdWFudGlsZShxLCBmb3JtYXR0ZXIgPSB1c0ZtdCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsczogW10sXHJcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gcGFyc2VGbG9hdChyZWNvcmRbYXR0cl0pO1xyXG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTih4KSkge1xyXG4gICAgICAgICAgICAgIHRoaXMudmFscy5wdXNoKHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52YWxzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICAgICAgICAgICAgY29uc3QgaSA9ICh0aGlzLnZhbHMubGVuZ3RoIC0gMSkgKiBxO1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmFsc1tNYXRoLmZsb29yKGkpXSArIHRoaXMudmFsc1tNYXRoLmNlaWwoaSldKSAvIDIuMDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcclxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgcnVubmluZ1N0YXQobW9kZSA9ICdtZWFuJywgZGRvZiA9IDEsIGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBuOiAwLjAsXHJcbiAgICAgICAgICBtOiAwLjAsXHJcbiAgICAgICAgICBzOiAwLjAsXHJcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gcGFyc2VGbG9hdChyZWNvcmRbYXR0cl0pO1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubiArPSAxLjA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm4gPT09IDEuMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubSA9IHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbU5ldyA9IHRoaXMubSArICh4IC0gdGhpcy5tKSAvIHRoaXMubjtcclxuICAgICAgICAgICAgdGhpcy5zICs9ICh4IC0gdGhpcy5tKSAqICh4IC0gbU5ldyk7XHJcbiAgICAgICAgICAgIHRoaXMubSA9IG1OZXc7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAnbWVhbicpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMCAvIDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubiA8PSBkZG9mKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAndmFyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnMgLyAodGhpcy5uIC0gZGRvZik7XHJcbiAgICAgICAgICAgICAgY2FzZSAnc3RkZXYnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnMgLyAodGhpcy5uIC0gZGRvZikpO1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gbW9kZSBmb3IgcnVubmluZ1N0YXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxyXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBzdW1PdmVyU3VtKGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFtudW0sIGRlbm9tXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdW1OdW06IDAsXHJcbiAgICAgICAgICBzdW1EZW5vbTogMCxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQocmVjb3JkW251bV0pKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3VtTnVtICs9IHBhcnNlRmxvYXQocmVjb3JkW251bV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQocmVjb3JkW2Rlbm9tXSkpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdW1EZW5vbSArPSBwYXJzZUZsb2F0KHJlY29yZFtkZW5vbV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bU51bSAvIHRoaXMuc3VtRGVub207XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXHJcbiAgICAgICAgICBudW1JbnB1dHM6XHJcbiAgICAgICAgICAgIHR5cGVvZiBudW0gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkZW5vbSAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMixcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBmcmFjdGlvbk9mKHdyYXBwZWQsIHR5cGUgPSAndG90YWwnLCBmb3JtYXR0ZXIgPSB1c0ZtdFBjdCkge1xyXG4gICAgcmV0dXJuICguLi54KSA9PlxyXG4gICAgICBmdW5jdGlvbiAoZGF0YSwgcm93S2V5LCBjb2xLZXkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2VsZWN0b3I6IHsgdG90YWw6IFtbXSwgW11dLCByb3c6IFtyb3dLZXksIFtdXSwgY29sOiBbW10sIGNvbEtleV0gfVtcclxuICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGlubmVyOiB3cmFwcGVkKC4uLkFycmF5LmZyb20oeCB8fCBbXSkpKGRhdGEsIHJvd0tleSwgY29sS2V5KSxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXIucHVzaChyZWNvcmQpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgdGhpcy5pbm5lci52YWx1ZSgpIC9cclxuICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgICAgICAuZ2V0QWdncmVnYXRvciguLi5BcnJheS5mcm9tKHRoaXMuc2VsZWN0b3IgfHwgW10pKVxyXG4gICAgICAgICAgICAgICAgLmlubmVyLnZhbHVlKClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHdyYXBwZWQoLi4uQXJyYXkuZnJvbSh4IHx8IFtdKSkoKS5udW1JbnB1dHMsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgZXh0ZW5kZWRBZ2dyZWdhdG9yVGVtcGxhdGVzID0ge1xyXG4gIGNvdW50VW5pcXVlKGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy51bmlxdWVzKHggPT4geC5sZW5ndGgsIGYpO1xyXG4gIH0sXHJcbiAgbGlzdFVuaXF1ZShzLCBmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMudW5pcXVlcyh4ID0+IHguam9pbihzKSwgZiB8fCAoeCA9PiB4KSk7XHJcbiAgfSxcclxuICBtYXgoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdtYXgnLCBmKTtcclxuICB9LFxyXG4gIG1pbihmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ21pbicsIGYpO1xyXG4gIH0sXHJcbiAgZmlyc3QoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdmaXJzdCcsIGYpO1xyXG4gIH0sXHJcbiAgbGFzdChmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ2xhc3QnLCBmKTtcclxuICB9LFxyXG4gIG1lZGlhbihmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucXVhbnRpbGUoMC41LCBmKTtcclxuICB9LFxyXG4gIGF2ZXJhZ2UoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCdtZWFuJywgMSwgZik7XHJcbiAgfSxcclxuICB2YXIoZGRvZiwgZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCd2YXInLCBkZG9mLCBmKTtcclxuICB9LFxyXG4gIHN0ZGV2KGRkb2YsIGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5ydW5uaW5nU3RhdCgnc3RkZXYnLCBkZG9mLCBmKTtcclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgYWdncmVnYXRvclRlbXBsYXRlcyA9IHtcclxuICAuLi5iYXNlQWdncmVnYXRvclRlbXBsYXRlcyxcclxuICAuLi5leHRlbmRlZEFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXHJcbn07XHJcblxyXG4vLyBkZWZhdWx0IGFnZ3JlZ2F0b3JzICYgcmVuZGVyZXJzIHVzZSBVUyBuYW1pbmcgYW5kIG51bWJlciBmb3JtYXR0aW5nXHJcbmNvbnN0IGFnZ3JlZ2F0b3JzID0gKHRwbCA9PiAoe1xyXG4gIENvdW50OiB0cGwuY291bnQodXNGbXRJbnQpLFxyXG4gICdDb3VudCBVbmlxdWUgVmFsdWVzJzogdHBsLmNvdW50VW5pcXVlKHVzRm10SW50KSxcclxuICAnTGlzdCBVbmlxdWUgVmFsdWVzJzogdHBsLmxpc3RVbmlxdWUoJywgJyksXHJcbiAgU3VtOiB0cGwuc3VtKHVzRm10KSxcclxuICAnSW50ZWdlciBTdW0nOiB0cGwuc3VtKHVzRm10SW50KSxcclxuICBBdmVyYWdlOiB0cGwuYXZlcmFnZSh1c0ZtdCksXHJcbiAgTWVkaWFuOiB0cGwubWVkaWFuKHVzRm10KSxcclxuICAnU2FtcGxlIFZhcmlhbmNlJzogdHBsLnZhcigxLCB1c0ZtdCksXHJcbiAgJ1NhbXBsZSBTdGFuZGFyZCBEZXZpYXRpb24nOiB0cGwuc3RkZXYoMSwgdXNGbXQpLFxyXG4gIE1pbmltdW06IHRwbC5taW4odXNGbXQpLFxyXG4gIE1heGltdW06IHRwbC5tYXgodXNGbXQpLFxyXG4gIEZpcnN0OiB0cGwuZmlyc3QodXNGbXQpLFxyXG4gIExhc3Q6IHRwbC5sYXN0KHVzRm10KSxcclxuICAnU3VtIG92ZXIgU3VtJzogdHBsLnN1bU92ZXJTdW0odXNGbXQpLFxyXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgVG90YWwnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICd0b3RhbCcsIHVzRm10UGN0KSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICdyb3cnLCB1c0ZtdFBjdCksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogdHBsLmZyYWN0aW9uT2YodHBsLnN1bSgpLCAnY29sJywgdXNGbXRQY3QpLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAndG90YWwnLCB1c0ZtdFBjdCksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgJ3JvdycsIHVzRm10UGN0KSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAnY29sJywgdXNGbXRQY3QpLFxyXG59KSkoYWdncmVnYXRvclRlbXBsYXRlcyk7XHJcblxyXG5jb25zdCBsb2NhbGVzID0ge1xyXG4gIGVuOiB7XHJcbiAgICBhZ2dyZWdhdG9ycyxcclxuICAgIGxvY2FsZVN0cmluZ3M6IHtcclxuICAgICAgcmVuZGVyRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCByZW5kZXJpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy4nLFxyXG4gICAgICBjb21wdXRlRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCBjb21wdXRpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy4nLFxyXG4gICAgICB1aVJlbmRlckVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgcmVuZGVyaW5nIHRoZSBQaXZvdFRhYmxlIFVJLicsXHJcbiAgICAgIHNlbGVjdEFsbDogJ1NlbGVjdCBBbGwnLFxyXG4gICAgICBzZWxlY3ROb25lOiAnU2VsZWN0IE5vbmUnLFxyXG4gICAgICB0b29NYW55OiAnKHRvbyBtYW55IHRvIGxpc3QpJyxcclxuICAgICAgZmlsdGVyUmVzdWx0czogJ0ZpbHRlciB2YWx1ZXMnLFxyXG4gICAgICBhcHBseTogJ0FwcGx5JyxcclxuICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcclxuICAgICAgdG90YWxzOiAnVG90YWxzJyxcclxuICAgICAgdnM6ICd2cycsXHJcbiAgICAgIGJ5OiAnYnknLFxyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG5cclxuLy8gZGF0ZUZvcm1hdCBkZXJpdmVyIGwxMG4gcmVxdWlyZXMgbW9udGggYW5kIGRheSBuYW1lcyB0byBiZSBwYXNzZWQgaW4gZGlyZWN0bHlcclxuY29uc3QgbXRoTmFtZXNFbiA9IFtcclxuICAnSmFuJyxcclxuICAnRmViJyxcclxuICAnTWFyJyxcclxuICAnQXByJyxcclxuICAnTWF5JyxcclxuICAnSnVuJyxcclxuICAnSnVsJyxcclxuICAnQXVnJyxcclxuICAnU2VwJyxcclxuICAnT2N0JyxcclxuICAnTm92JyxcclxuICAnRGVjJyxcclxuXTtcclxuY29uc3QgZGF5TmFtZXNFbiA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107XHJcbmNvbnN0IHplcm9QYWQgPSBudW1iZXIgPT4gYDAke251bWJlcn1gLnN1YnN0cigtMiwgMik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbWFnaWMtbnVtYmVyc1xyXG5cclxuY29uc3QgZGVyaXZlcnMgPSB7XHJcbiAgYmluKGNvbCwgYmluV2lkdGgpIHtcclxuICAgIHJldHVybiByZWNvcmQgPT4gcmVjb3JkW2NvbF0gLSAocmVjb3JkW2NvbF0gJSBiaW5XaWR0aCk7XHJcbiAgfSxcclxuICBkYXRlRm9ybWF0KFxyXG4gICAgY29sLFxyXG4gICAgZm9ybWF0U3RyaW5nLFxyXG4gICAgdXRjT3V0cHV0ID0gZmFsc2UsXHJcbiAgICBtdGhOYW1lcyA9IG10aE5hbWVzRW4sXHJcbiAgICBkYXlOYW1lcyA9IGRheU5hbWVzRW4sXHJcbiAgKSB7XHJcbiAgICBjb25zdCB1dGMgPSB1dGNPdXRwdXQgPyAnVVRDJyA6ICcnO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWNvcmQpIHtcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UocmVjb3JkW2NvbF0pKTtcclxuICAgICAgaWYgKE51bWJlci5pc05hTihkYXRlKSkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm9ybWF0U3RyaW5nLnJlcGxhY2UoLyUoLikvZywgZnVuY3Rpb24gKG0sIHApIHtcclxuICAgICAgICBzd2l0Y2ggKHApIHtcclxuICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZVtgZ2V0JHt1dGN9RnVsbFllYXJgXSgpO1xyXG4gICAgICAgICAgY2FzZSAnbSc6XHJcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfU1vbnRoYF0oKSArIDEpO1xyXG4gICAgICAgICAgY2FzZSAnbic6XHJcbiAgICAgICAgICAgIHJldHVybiBtdGhOYW1lc1tkYXRlW2BnZXQke3V0Y31Nb250aGBdKCldO1xyXG4gICAgICAgICAgY2FzZSAnZCc6XHJcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfURhdGVgXSgpKTtcclxuICAgICAgICAgIGNhc2UgJ3cnOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF5TmFtZXNbZGF0ZVtgZ2V0JHt1dGN9RGF5YF0oKV07XHJcbiAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVbYGdldCR7dXRjfURheWBdKCk7XHJcbiAgICAgICAgICBjYXNlICdIJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9SG91cnNgXSgpKTtcclxuICAgICAgICAgIGNhc2UgJ00nOlxyXG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31NaW51dGVzYF0oKSk7XHJcbiAgICAgICAgICBjYXNlICdTJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9U2Vjb25kc2BdKCkpO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGAlJHtwfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgfSxcclxufTtcclxuXHJcbi8vIEdpdmVuIGFuIGFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZXMsIGNvbnZlcnQgdG8gYSBrZXkgdGhhdFxyXG4vLyBjYW4gYmUgdXNlZCBpbiBvYmplY3RzLlxyXG5jb25zdCBmbGF0S2V5ID0gYXR0clZhbHMgPT4gYXR0clZhbHMuam9pbihTdHJpbmcuZnJvbUNoYXJDb2RlKDApKTtcclxuXHJcbi8qXHJcbkRhdGEgTW9kZWwgY2xhc3NcclxuKi9cclxuXHJcbmNsYXNzIFBpdm90RGF0YSB7XHJcbiAgY29uc3RydWN0b3IoaW5wdXRQcm9wcyA9IHt9LCBzdWJ0b3RhbHMgPSB7fSkge1xyXG4gICAgdGhpcy5wcm9wcyA9IHsgLi4uUGl2b3REYXRhLmRlZmF1bHRQcm9wcywgLi4uaW5wdXRQcm9wcyB9O1xyXG4gICAgdGhpcy5wcm9jZXNzUmVjb3JkID0gdGhpcy5wcm9jZXNzUmVjb3JkLmJpbmQodGhpcyk7XHJcbiAgICBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoXHJcbiAgICAgIFBpdm90RGF0YS5wcm9wVHlwZXMsXHJcbiAgICAgIHRoaXMucHJvcHMsXHJcbiAgICAgICdwcm9wJyxcclxuICAgICAgJ1Bpdm90RGF0YScsXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWdncmVnYXRvciA9IHRoaXMucHJvcHNcclxuICAgICAgLmFnZ3JlZ2F0b3JzRmFjdG9yeSh0aGlzLnByb3BzLmRlZmF1bHRGb3JtYXR0ZXIpXHJcbiAgICAgIFt0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lXSh0aGlzLnByb3BzLnZhbHMpO1xyXG4gICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9ycyA9XHJcbiAgICAgIHRoaXMucHJvcHMuY3VzdG9tRm9ybWF0dGVycyAmJlxyXG4gICAgICBPYmplY3QuZW50cmllcyh0aGlzLnByb3BzLmN1c3RvbUZvcm1hdHRlcnMpLnJlZHVjZShcclxuICAgICAgICAoYWNjLCBba2V5LCBjb2x1bW5Gb3JtYXR0ZXJdKSA9PiB7XHJcbiAgICAgICAgICBhY2Nba2V5XSA9IHt9O1xyXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoY29sdW1uRm9ybWF0dGVyKS5mb3JFYWNoKChbY29sdW1uLCBmb3JtYXR0ZXJdKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1trZXldW2NvbHVtbl0gPSB0aGlzLnByb3BzXHJcbiAgICAgICAgICAgICAgLmFnZ3JlZ2F0b3JzRmFjdG9yeShmb3JtYXR0ZXIpXHJcbiAgICAgICAgICAgICAgW3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWVdKHRoaXMucHJvcHMudmFscyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7fSxcclxuICAgICAgKTtcclxuICAgIHRoaXMudHJlZSA9IHt9O1xyXG4gICAgdGhpcy5yb3dLZXlzID0gW107XHJcbiAgICB0aGlzLmNvbEtleXMgPSBbXTtcclxuICAgIHRoaXMucm93VG90YWxzID0ge307XHJcbiAgICB0aGlzLmNvbFRvdGFscyA9IHt9O1xyXG4gICAgdGhpcy5hbGxUb3RhbCA9IHRoaXMuYWdncmVnYXRvcih0aGlzLCBbXSwgW10pO1xyXG4gICAgdGhpcy5zdWJ0b3RhbHMgPSBzdWJ0b3RhbHM7XHJcbiAgICB0aGlzLnNvcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBpbnB1dCwgYWNjdW11bGF0aW5nIGRhdGEgZm9yIGNlbGxzXHJcbiAgICBQaXZvdERhdGEuZm9yRWFjaFJlY29yZCh0aGlzLnByb3BzLmRhdGEsIHRoaXMucHJvY2Vzc1JlY29yZCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKHJlY29yZCwgdG90YWxzS2V5cykge1xyXG4gICAgaWYgKCF0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XHJcbiAgICB9XHJcbiAgICBjb25zdCBbZ3JvdXBOYW1lLCBncm91cFZhbHVlXSA9XHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHJlY29yZCkuZmluZChcclxuICAgICAgICAoW25hbWUsIHZhbHVlXSkgPT5cclxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnNbbmFtZV0gJiZcclxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnNbbmFtZV1bdmFsdWVdLFxyXG4gICAgICApIHx8IFtdO1xyXG4gICAgaWYgKFxyXG4gICAgICAhZ3JvdXBOYW1lIHx8XHJcbiAgICAgICFncm91cFZhbHVlIHx8XHJcbiAgICAgICh0b3RhbHNLZXlzICYmICF0b3RhbHNLZXlzLmluY2x1ZGVzKGdyb3VwVmFsdWUpKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tncm91cE5hbWVdW2dyb3VwVmFsdWVdIHx8IHRoaXMuYWdncmVnYXRvcjtcclxuICB9XHJcblxyXG4gIGFyclNvcnQoYXR0cnMsIHBhcnRpYWxPblRvcCwgcmV2ZXJzZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBzb3J0ZXJzQXJyID0gYXR0cnMubWFwKGEgPT4gZ2V0U29ydCh0aGlzLnByb3BzLnNvcnRlcnMsIGEpKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGltaXQ7IGkgKz0gMSkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRlciA9IHNvcnRlcnNBcnJbaV07XHJcbiAgICAgICAgY29uc3QgY29tcGFyaXNvbiA9IHJldmVyc2UgPyBzb3J0ZXIoYltpXSwgYVtpXSkgOiBzb3J0ZXIoYVtpXSwgYltpXSk7XHJcbiAgICAgICAgaWYgKGNvbXBhcmlzb24gIT09IDApIHtcclxuICAgICAgICAgIHJldHVybiBjb21wYXJpc29uO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcGFydGlhbE9uVG9wID8gYS5sZW5ndGggLSBiLmxlbmd0aCA6IGIubGVuZ3RoIC0gYS5sZW5ndGg7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc29ydEtleXMoKSB7XHJcbiAgICBpZiAoIXRoaXMuc29ydGVkKSB7XHJcbiAgICAgIHRoaXMuc29ydGVkID0gdHJ1ZTtcclxuICAgICAgY29uc3QgdiA9IChyLCBjKSA9PiB0aGlzLmdldEFnZ3JlZ2F0b3IociwgYykudmFsdWUoKTtcclxuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLnJvd09yZGVyKSB7XHJcbiAgICAgICAgY2FzZSAna2V5X3pfdG9fYSc6XHJcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydChcclxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMucm93cywgdGhpcy5zdWJ0b3RhbHMucm93UGFydGlhbE9uVG9wLCB0cnVlKSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd2YWx1ZV9hX3RvX3onOlxyXG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoKGEsIGIpID0+IG5hdHVyYWxTb3J0KHYoYSwgW10pLCB2KGIsIFtdKSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndmFsdWVfel90b19hJzpcclxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KChhLCBiKSA9PiAtbmF0dXJhbFNvcnQodihhLCBbXSksIHYoYiwgW10pKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLnJvd3MsIHRoaXMuc3VidG90YWxzLnJvd1BhcnRpYWxPblRvcCksXHJcbiAgICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5jb2xPcmRlcikge1xyXG4gICAgICAgIGNhc2UgJ2tleV96X3RvX2EnOlxyXG4gICAgICAgICAgdGhpcy5jb2xLZXlzLnNvcnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLmNvbHMsIHRoaXMuc3VidG90YWxzLmNvbFBhcnRpYWxPblRvcCwgdHJ1ZSksXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndmFsdWVfYV90b196JzpcclxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KChhLCBiKSA9PiBuYXR1cmFsU29ydCh2KFtdLCBhKSwgdihbXSwgYikpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ZhbHVlX3pfdG9fYSc6XHJcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydCgoYSwgYikgPT4gLW5hdHVyYWxTb3J0KHYoW10sIGEpLCB2KFtdLCBiKSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KFxyXG4gICAgICAgICAgICB0aGlzLmFyclNvcnQodGhpcy5wcm9wcy5jb2xzLCB0aGlzLnN1YnRvdGFscy5jb2xQYXJ0aWFsT25Ub3ApLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29sS2V5cygpIHtcclxuICAgIHRoaXMuc29ydEtleXMoKTtcclxuICAgIHJldHVybiB0aGlzLmNvbEtleXM7XHJcbiAgfVxyXG5cclxuICBnZXRSb3dLZXlzKCkge1xyXG4gICAgdGhpcy5zb3J0S2V5cygpO1xyXG4gICAgcmV0dXJuIHRoaXMucm93S2V5cztcclxuICB9XHJcblxyXG4gIHByb2Nlc3NSZWNvcmQocmVjb3JkKSB7XHJcbiAgICAvLyB0aGlzIGNvZGUgaXMgY2FsbGVkIGluIGEgdGlnaHQgbG9vcFxyXG4gICAgY29uc3QgY29sS2V5ID0gW107XHJcbiAgICBjb25zdCByb3dLZXkgPSBbXTtcclxuICAgIHRoaXMucHJvcHMuY29scy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgIGNvbEtleS5wdXNoKGNvbCBpbiByZWNvcmQgPyByZWNvcmRbY29sXSA6ICdudWxsJyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucHJvcHMucm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgIHJvd0tleS5wdXNoKHJvdyBpbiByZWNvcmQgPyByZWNvcmRbcm93XSA6ICdudWxsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFsbFRvdGFsLnB1c2gocmVjb3JkKTtcclxuXHJcbiAgICBjb25zdCByb3dTdGFydCA9IHRoaXMuc3VidG90YWxzLnJvd0VuYWJsZWQgPyAxIDogTWF0aC5tYXgoMSwgcm93S2V5Lmxlbmd0aCk7XHJcbiAgICBjb25zdCBjb2xTdGFydCA9IHRoaXMuc3VidG90YWxzLmNvbEVuYWJsZWQgPyAxIDogTWF0aC5tYXgoMSwgY29sS2V5Lmxlbmd0aCk7XHJcblxyXG4gICAgbGV0IGlzUm93U3VidG90YWw7XHJcbiAgICBsZXQgaXNDb2xTdWJ0b3RhbDtcclxuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcclxuICAgICAgaXNSb3dTdWJ0b3RhbCA9IHJpIDwgcm93S2V5Lmxlbmd0aDtcclxuICAgICAgY29uc3QgZlJvd0tleSA9IHJvd0tleS5zbGljZSgwLCByaSk7XHJcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xyXG4gICAgICBpZiAoIXRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldKSB7XHJcbiAgICAgICAgdGhpcy5yb3dLZXlzLnB1c2goZlJvd0tleSk7XHJcbiAgICAgICAgdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXHJcbiAgICAgICAgICByZWNvcmQsXHJcbiAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgKSh0aGlzLCBmUm93S2V5LCBbXSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0ucHVzaChyZWNvcmQpO1xyXG4gICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XS5pc1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBjaSA9IGNvbFN0YXJ0OyBjaSA8PSBjb2xLZXkubGVuZ3RoOyBjaSArPSAxKSB7XHJcbiAgICAgIGlzQ29sU3VidG90YWwgPSBjaSA8IGNvbEtleS5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IGZDb2xLZXkgPSBjb2xLZXkuc2xpY2UoMCwgY2kpO1xyXG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShmQ29sS2V5KTtcclxuICAgICAgaWYgKCF0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XSkge1xyXG4gICAgICAgIHRoaXMuY29sS2V5cy5wdXNoKGZDb2xLZXkpO1xyXG4gICAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldID0gdGhpcy5nZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKFxyXG4gICAgICAgICAgcmVjb3JkLFxyXG4gICAgICAgICAgY29sS2V5LFxyXG4gICAgICAgICkodGhpcywgW10sIGZDb2xLZXkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldLnB1c2gocmVjb3JkKTtcclxuICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0uaXNTdWJ0b3RhbCA9IGlzQ29sU3VidG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQW5kIG5vdyBmaWxsIGluIGZvciBhbGwgdGhlIHN1Yi1jZWxscy5cclxuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcclxuICAgICAgaXNSb3dTdWJ0b3RhbCA9IHJpIDwgcm93S2V5Lmxlbmd0aDtcclxuICAgICAgY29uc3QgZlJvd0tleSA9IHJvd0tleS5zbGljZSgwLCByaSk7XHJcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xyXG4gICAgICBpZiAoIXRoaXMudHJlZVtmbGF0Um93S2V5XSkge1xyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XSA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGNpID0gY29sU3RhcnQ7IGNpIDw9IGNvbEtleS5sZW5ndGg7IGNpICs9IDEpIHtcclxuICAgICAgICBpc0NvbFN1YnRvdGFsID0gY2kgPCBjb2xLZXkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGZDb2xLZXkgPSBjb2xLZXkuc2xpY2UoMCwgY2kpO1xyXG4gICAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGZDb2xLZXkpO1xyXG4gICAgICAgIGlmICghdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldKSB7XHJcbiAgICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXHJcbiAgICAgICAgICAgIHJlY29yZCxcclxuICAgICAgICAgICkodGhpcywgZlJvd0tleSwgZkNvbEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5wdXNoKHJlY29yZCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5pc1Jvd1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcclxuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0uaXNDb2xTdWJ0b3RhbCA9IGlzQ29sU3VidG90YWw7XHJcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLmlzU3VidG90YWwgPVxyXG4gICAgICAgICAgaXNSb3dTdWJ0b3RhbCB8fCBpc0NvbFN1YnRvdGFsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRBZ2dyZWdhdG9yKHJvd0tleSwgY29sS2V5KSB7XHJcbiAgICBsZXQgYWdnO1xyXG4gICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkocm93S2V5KTtcclxuICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleSk7XHJcbiAgICBpZiAocm93S2V5Lmxlbmd0aCA9PT0gMCAmJiBjb2xLZXkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGFnZyA9IHRoaXMuYWxsVG90YWw7XHJcbiAgICB9IGVsc2UgaWYgKHJvd0tleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWdnID0gdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV07XHJcbiAgICB9IGVsc2UgaWYgKGNvbEtleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWdnID0gdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZ2cgPSB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhZ2cgfHwge1xyXG4gICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNhbiBoYW5kbGUgYXJyYXlzIG9yIGpRdWVyeSBzZWxlY3Rpb25zIG9mIHRhYmxlc1xyXG5QaXZvdERhdGEuZm9yRWFjaFJlY29yZCA9IGZ1bmN0aW9uIChpbnB1dCwgcHJvY2Vzc1JlY29yZCkge1xyXG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgLy8gYXJyYXkgb2Ygb2JqZWN0c1xyXG4gICAgcmV0dXJuIGlucHV0Lm1hcChyZWNvcmQgPT4gcHJvY2Vzc1JlY29yZChyZWNvcmQpKTtcclxuICB9XHJcbiAgdGhyb3cgbmV3IEVycm9yKHQoJ1Vua25vd24gaW5wdXQgZm9ybWF0JykpO1xyXG59O1xyXG5cclxuUGl2b3REYXRhLmRlZmF1bHRQcm9wcyA9IHtcclxuICBhZ2dyZWdhdG9ycyxcclxuICBjb2xzOiBbXSxcclxuICByb3dzOiBbXSxcclxuICB2YWxzOiBbXSxcclxuICBhZ2dyZWdhdG9yTmFtZTogJ0NvdW50JyxcclxuICBzb3J0ZXJzOiB7fSxcclxuICByb3dPcmRlcjogJ2tleV9hX3RvX3onLFxyXG4gIGNvbE9yZGVyOiAna2V5X2FfdG9feicsXHJcbn07XHJcblxyXG5QaXZvdERhdGEucHJvcFR5cGVzID0ge1xyXG4gIGRhdGE6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheSwgUHJvcFR5cGVzLm9iamVjdCwgUHJvcFR5cGVzLmZ1bmNdKVxyXG4gICAgLmlzUmVxdWlyZWQsXHJcbiAgYWdncmVnYXRvck5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY29sczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgcm93czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgdmFsczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgdmFsdWVGaWx0ZXI6IFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmJvb2wpKSxcclxuICBzb3J0ZXJzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcclxuICAgIFByb3BUeXBlcy5mdW5jLFxyXG4gICAgUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5mdW5jKSxcclxuICBdKSxcclxuICBkZXJpdmVkQXR0cmlidXRlczogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5mdW5jKSxcclxuICByb3dPcmRlcjogUHJvcFR5cGVzLm9uZU9mKFtcclxuICAgICdrZXlfYV90b196JyxcclxuICAgICdrZXlfel90b19hJyxcclxuICAgICd2YWx1ZV9hX3RvX3onLFxyXG4gICAgJ3ZhbHVlX3pfdG9fYScsXHJcbiAgXSksXHJcbiAgY29sT3JkZXI6IFByb3BUeXBlcy5vbmVPZihbXHJcbiAgICAna2V5X2FfdG9feicsXHJcbiAgICAna2V5X3pfdG9fYScsXHJcbiAgICAndmFsdWVfYV90b196JyxcclxuICAgICd2YWx1ZV96X3RvX2EnLFxyXG4gIF0pLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBhZ2dyZWdhdG9yVGVtcGxhdGVzLFxyXG4gIGFnZ3JlZ2F0b3JzLFxyXG4gIGRlcml2ZXJzLFxyXG4gIGxvY2FsZXMsXHJcbiAgbmF0dXJhbFNvcnQsXHJcbiAgbnVtYmVyRm9ybWF0LFxyXG4gIGdldFNvcnQsXHJcbiAgc29ydEFzLFxyXG4gIGZsYXRLZXksXHJcbiAgUGl2b3REYXRhLFxyXG59O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx":
/*!******************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PivotTableChart)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/types/Column.ts\");\n/* harmony import */ var _superset_ui_chart_controls__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/chart-controls */ \"./packages/superset-ui-chart-controls/src/types.ts\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types */ \"./plugins/plugin-chart-pivot-table/src/types.ts\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  ${({ height, width, margin }) => `\n      margin: ${margin}px;\n      height: ${height - margin * 2}px;\n      width: ${typeof width === 'string' ? parseInt(width, 10) : width - margin * 2}px;\n `}\n`;\nconst PivotTableWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  height: 100%;\n  max-width: fit-content;\n  overflow: auto;\n`;\nconst METRIC_KEY = 'metric';\nconst iconStyle = { stroke: 'black', strokeWidth: '16px' };\nconst vals = ['value'];\nconst aggregatorsFactory = (formatter) => ({\n  Count: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(formatter),\n  'Count Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.countUnique(formatter),\n  'List Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.listUnique(', ', formatter),\n  Sum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(formatter),\n  Average: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.average(formatter),\n  Median: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.median(formatter),\n  'Sample Variance': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates[\"var\"](1, formatter),\n  'Sample Standard Deviation': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.stdev(1, formatter),\n  Minimum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.min(formatter),\n  Maximum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.max(formatter),\n  First: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.first(formatter),\n  Last: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.last(formatter),\n  'Sum as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'total', formatter),\n  'Sum as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'row', formatter),\n  'Sum as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'col', formatter),\n  'Count as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'total', formatter),\n  'Count as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'row', formatter),\n  'Count as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'col', formatter) });\n\n/* If you change this logic, please update the corresponding Python\r\n * function (https://github.com/apache/superset/blob/master/superset/charts/post_processing.py),\r\n * or reach out to @betodealmeida.\r\n */\nfunction PivotTableChart(props) {\n  const { data, height, width, groupbyRows: groupbyRowsRaw, groupbyColumns: groupbyColumnsRaw, metrics, colOrder, rowOrder, aggregateFunction, transposePivot, combineMetric, rowSubtotalPosition, colSubtotalPosition, colTotals, rowTotals, valueFormat, emitFilter, setDataMask, selectedFilters, verboseMap, columnFormats, metricsLayout, metricColorFormatters, dateFormatters } = props;\n  const theme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme)();\n  const defaultFormatter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.getNumberFormatter)(valueFormat), [valueFormat]);\n  const columnFormatsArray = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Object.entries(columnFormats), [columnFormats]);\n  const hasCustomMetricFormatters = columnFormatsArray.length > 0;\n  const metricFormatters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => hasCustomMetricFormatters ?\n  {\n    [METRIC_KEY]: Object.fromEntries(columnFormatsArray.map(([metric, format]) => [\n    metric,\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.getNumberFormatter)(format)])) } :\n\n\n  undefined, [columnFormatsArray, hasCustomMetricFormatters]);\n  const metricNames = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => metrics.map((metric) => typeof metric === 'string' ? metric : metric.label), [metrics]);\n  const unpivotedData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => data.reduce((acc, record) => [\n  ...acc,\n  ...metricNames.\n  map((name) => ({\n    ...record,\n    [METRIC_KEY]: name,\n    value: record[name] })).\n\n  filter((record) => record.value !== null)],\n  []), [data, metricNames]);\n  const groupbyRows = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyRowsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"]), [groupbyRowsRaw]);\n  const groupbyColumns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyColumnsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"]), [groupbyColumnsRaw]);\n  const sorters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    [METRIC_KEY]: (0,_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.sortAs)(metricNames) }),\n  [metricNames]);\n  const [rows, cols] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let [rows_, cols_] = transposePivot ?\n    [groupbyColumns, groupbyRows] :\n    [groupbyRows, groupbyColumns];\n    if (metricsLayout === _types__WEBPACK_IMPORTED_MODULE_5__.MetricsLayoutEnum.ROWS) {\n      rows_ = combineMetric ? [...rows_, METRIC_KEY] : [METRIC_KEY, ...rows_];\n    } else\n    {\n      cols_ = combineMetric ? [...cols_, METRIC_KEY] : [METRIC_KEY, ...cols_];\n    }\n    return [rows_, cols_];\n  }, [\n  combineMetric,\n  groupbyColumns,\n  groupbyRows,\n  metricsLayout,\n  transposePivot]);\n\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filters) => {\n    const filterKeys = Object.keys(filters);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    setDataMask({\n      extraFormData: {\n        filters: filterKeys.length === 0 ?\n        undefined :\n        filterKeys.map((key) => {var _groupby$find;\n          const val = filters == null ? void 0 : filters[key];\n          const col = (_groupby$find = groupby.find((item) => {\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_6__.isPhysicalColumn)(item)) {\n              return item === key;\n            }\n            if ((0,_superset_ui_chart_controls__WEBPACK_IMPORTED_MODULE_7__.isAdhocColumn)(item)) {\n              return item.label === key;\n            }\n            return false;\n          })) != null ? _groupby$find : '';\n          if (val === null || val === undefined)\n          return {\n            col,\n            op: 'IS NULL' };\n\n          return {\n            col,\n            op: 'IN',\n            val: val };\n\n        }) },\n\n      filterState: {\n        value: filters && Object.keys(filters).length ?\n        Object.values(filters) :\n        null,\n        selectedFilters: filters && Object.keys(filters).length ? filters : null } });\n\n\n  }, [groupbyColumnsRaw, groupbyRowsRaw, setDataMask]);\n  const toggleFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, value, filters, pivotData, isSubtotal, isGrandTotal) => {\n    if (isSubtotal || isGrandTotal || !emitFilter) {\n      return;\n    }\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key;return !!selectedFilters && ((_selectedFilters$key = selectedFilters[key]) == null ? void 0 : _selectedFilters$key.includes(val));};\n    const filtersCopy = { ...filters };\n    delete filtersCopy[METRIC_KEY];\n    const filtersEntries = Object.entries(filtersCopy);\n    if (filtersEntries.length === 0) {\n      return;\n    }\n    const [key, val] = filtersEntries[filtersEntries.length - 1];\n    let updatedFilters = { ...(selectedFilters || {}) };\n    // multi select\n    // if (selectedFilters && isActiveFilterValue(key, val)) {\n    //   updatedFilters[key] = selectedFilters[key].filter((x: DataRecordValue) => x !== val);\n    // } else {\n    //   updatedFilters[key] = [...(selectedFilters?.[key] || []), val];\n    // }\n    // single select\n    if (selectedFilters && isActiveFilterValue(key, val)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [val] };\n\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    handleChange(updatedFilters);\n  }, [emitFilter, selectedFilters, handleChange]);\n  const tableOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    clickRowHeaderCallback: toggleFilter,\n    clickColumnHeaderCallback: toggleFilter,\n    colTotals,\n    rowTotals,\n    highlightHeaderCellsOnHover: emitFilter,\n    highlightedHeaderCells: selectedFilters,\n    omittedHighlightHeaderGroups: [METRIC_KEY],\n    cellColorFormatters: { [METRIC_KEY]: metricColorFormatters },\n    dateFormatters }),\n  [\n  colTotals,\n  dateFormatters,\n  emitFilter,\n  metricColorFormatters,\n  rowTotals,\n  selectedFilters,\n  toggleFilter]);\n\n  const subtotalOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    colSubtotalDisplay: { displayOnTop: colSubtotalPosition },\n    rowSubtotalDisplay: { displayOnTop: rowSubtotalPosition },\n    arrowCollapsed: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { style: iconStyle }),\n    arrowExpanded: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__[\"default\"], { style: iconStyle }) }),\n  [colSubtotalPosition, rowSubtotalPosition]);\n  return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(Styles, { height: height, width: width, margin: theme.gridUnit * 4 },\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(PivotTableWrapper, null,\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_react_pivottable__WEBPACK_IMPORTED_MODULE_11__[\"default\"], { data: unpivotedData, rows: rows, cols: cols, aggregatorsFactory: aggregatorsFactory, defaultFormatter: defaultFormatter, customFormatters: metricFormatters, aggregatorName: aggregateFunction, vals: vals, colOrder: colOrder, rowOrder: rowOrder, sorters: sorters, tableOptions: tableOptions, subtotalOptions: subtotalOptions, namesMapping: verboseMap })));\n\n\n}__signature__(PivotTableChart, \"useTheme{theme}\\nuseMemo{defaultFormatter}\\nuseMemo{columnFormatsArray}\\nuseMemo{metricFormatters}\\nuseMemo{metricNames}\\nuseMemo{unpivotedData}\\nuseMemo{groupbyRows}\\nuseMemo{groupbyColumns}\\nuseMemo{sorters}\\nuseMemo{[rows, cols]}\\nuseCallback{handleChange}\\nuseCallback{toggleFilter}\\nuseMemo{tableOptions}\\nuseMemo{subtotalOptions}\", () => [_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(PivotTableWrapper, \"PivotTableWrapper\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(METRIC_KEY, \"METRIC_KEY\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(iconStyle, \"iconStyle\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(vals, \"vals\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(aggregatorsFactory, \"aggregatorsFactory\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(PivotTableChart, \"PivotTableChart\", \"D:\\\\work\\\\PublicProject\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvUGl2b3RUYWJsZUNoYXJ0LnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQUtBOztBQU9BOzs7QUFHQTtBQUNBO0FBQ0E7QUEyQkE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBOzs7QUFJQTtBQUlBO0FBUUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUlBO0FBSUE7QUFLQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUlBO0FBSUE7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7OztBQW1CQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL1Bpdm90VGFibGVDaGFydC50c3g/N2QzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFBsdXNTcXVhcmVPdXRsaW5lZCwgTWludXNTcXVhcmVPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zJztcclxuaW1wb3J0IHtcclxuICBBZGhvY01ldHJpYyxcclxuICBEYXRhUmVjb3JkVmFsdWUsXHJcbiAgZ2V0Q29sdW1uTGFiZWwsXHJcbiAgZ2V0TnVtYmVyRm9ybWF0dGVyLFxyXG4gIGlzUGh5c2ljYWxDb2x1bW4sXHJcbiAgTnVtYmVyRm9ybWF0dGVyLFxyXG4gIHN0eWxlZCxcclxuICB1c2VUaGVtZSxcclxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XHJcbmltcG9ydCB7IGlzQWRob2NDb2x1bW4gfSBmcm9tICdAc3VwZXJzZXQtdWkvY2hhcnQtY29udHJvbHMnO1xyXG5pbXBvcnQgeyBQaXZvdFRhYmxlLCBzb3J0QXMsIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMgfSBmcm9tICcuL3JlYWN0LXBpdm90dGFibGUnO1xyXG5pbXBvcnQge1xyXG4gIEZpbHRlclR5cGUsXHJcbiAgTWV0cmljc0xheW91dEVudW0sXHJcbiAgUGl2b3RUYWJsZVByb3BzLFxyXG4gIFBpdm90VGFibGVTdHlsZXNQcm9wcyxcclxuICBTZWxlY3RlZEZpbHRlcnNUeXBlLFxyXG59IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdjxQaXZvdFRhYmxlU3R5bGVzUHJvcHM+YFxyXG4gICR7KHsgaGVpZ2h0LCB3aWR0aCwgbWFyZ2luIH0pID0+IGBcclxuICAgICAgbWFyZ2luOiAke21hcmdpbn1weDtcclxuICAgICAgaGVpZ2h0OiAke2hlaWdodCAtIG1hcmdpbiAqIDJ9cHg7XHJcbiAgICAgIHdpZHRoOiAke1xyXG4gICAgICAgIHR5cGVvZiB3aWR0aCA9PT0gJ3N0cmluZycgPyBwYXJzZUludCh3aWR0aCwgMTApIDogd2lkdGggLSBtYXJnaW4gKiAyXHJcbiAgICAgIH1weDtcclxuIGB9XHJcbmA7XHJcblxyXG5jb25zdCBQaXZvdFRhYmxlV3JhcHBlciA9IHN0eWxlZC5kaXZgXHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIG1heC13aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgb3ZlcmZsb3c6IGF1dG87XHJcbmA7XHJcblxyXG5jb25zdCBNRVRSSUNfS0VZID0gJ21ldHJpYyc7XHJcbmNvbnN0IGljb25TdHlsZSA9IHsgc3Ryb2tlOiAnYmxhY2snLCBzdHJva2VXaWR0aDogJzE2cHgnIH07XHJcbmNvbnN0IHZhbHMgPSBbJ3ZhbHVlJ107XHJcblxyXG5jb25zdCBhZ2dyZWdhdG9yc0ZhY3RvcnkgPSAoZm9ybWF0dGVyOiBOdW1iZXJGb3JtYXR0ZXIpID0+ICh7XHJcbiAgQ291bnQ6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoZm9ybWF0dGVyKSxcclxuICAnQ291bnQgVW5pcXVlIFZhbHVlcyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnRVbmlxdWUoZm9ybWF0dGVyKSxcclxuICAnTGlzdCBVbmlxdWUgVmFsdWVzJzogYWdncmVnYXRvclRlbXBsYXRlcy5saXN0VW5pcXVlKCcsICcsIGZvcm1hdHRlciksXHJcbiAgU3VtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bShmb3JtYXR0ZXIpLFxyXG4gIEF2ZXJhZ2U6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuYXZlcmFnZShmb3JtYXR0ZXIpLFxyXG4gIE1lZGlhbjogYWdncmVnYXRvclRlbXBsYXRlcy5tZWRpYW4oZm9ybWF0dGVyKSxcclxuICAnU2FtcGxlIFZhcmlhbmNlJzogYWdncmVnYXRvclRlbXBsYXRlcy52YXIoMSwgZm9ybWF0dGVyKSxcclxuICAnU2FtcGxlIFN0YW5kYXJkIERldmlhdGlvbic6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3RkZXYoMSwgZm9ybWF0dGVyKSxcclxuICBNaW5pbXVtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLm1pbihmb3JtYXR0ZXIpLFxyXG4gIE1heGltdW06IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubWF4KGZvcm1hdHRlciksXHJcbiAgRmlyc3Q6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZmlyc3QoZm9ybWF0dGVyKSxcclxuICBMYXN0OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmxhc3QoZm9ybWF0dGVyKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcclxuICAgICd0b3RhbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxyXG4gICAgJ3JvdycsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxyXG4gICAgJ2NvbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgVG90YWwnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KCksXHJcbiAgICAndG90YWwnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXHJcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KCksXHJcbiAgICAncm93JyxcclxuICAgIGZvcm1hdHRlcixcclxuICApLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxyXG4gICAgJ2NvbCcsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxufSk7XHJcblxyXG4vKiBJZiB5b3UgY2hhbmdlIHRoaXMgbG9naWMsIHBsZWFzZSB1cGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgUHl0aG9uXHJcbiAqIGZ1bmN0aW9uIChodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL3N1cGVyc2V0L2Jsb2IvbWFzdGVyL3N1cGVyc2V0L2NoYXJ0cy9wb3N0X3Byb2Nlc3NpbmcucHkpLFxyXG4gKiBvciByZWFjaCBvdXQgdG8gQGJldG9kZWFsbWVpZGEuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQaXZvdFRhYmxlQ2hhcnQocHJvcHM6IFBpdm90VGFibGVQcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGRhdGEsXHJcbiAgICBoZWlnaHQsXHJcbiAgICB3aWR0aCxcclxuICAgIGdyb3VwYnlSb3dzOiBncm91cGJ5Um93c1JhdyxcclxuICAgIGdyb3VwYnlDb2x1bW5zOiBncm91cGJ5Q29sdW1uc1JhdyxcclxuICAgIG1ldHJpY3MsXHJcbiAgICBjb2xPcmRlcixcclxuICAgIHJvd09yZGVyLFxyXG4gICAgYWdncmVnYXRlRnVuY3Rpb24sXHJcbiAgICB0cmFuc3Bvc2VQaXZvdCxcclxuICAgIGNvbWJpbmVNZXRyaWMsXHJcbiAgICByb3dTdWJ0b3RhbFBvc2l0aW9uLFxyXG4gICAgY29sU3VidG90YWxQb3NpdGlvbixcclxuICAgIGNvbFRvdGFscyxcclxuICAgIHJvd1RvdGFscyxcclxuICAgIHZhbHVlRm9ybWF0LFxyXG4gICAgZW1pdEZpbHRlcixcclxuICAgIHNldERhdGFNYXNrLFxyXG4gICAgc2VsZWN0ZWRGaWx0ZXJzLFxyXG4gICAgdmVyYm9zZU1hcCxcclxuICAgIGNvbHVtbkZvcm1hdHMsXHJcbiAgICBtZXRyaWNzTGF5b3V0LFxyXG4gICAgbWV0cmljQ29sb3JGb3JtYXR0ZXJzLFxyXG4gICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgfSA9IHByb3BzO1xyXG5cclxuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XHJcbiAgY29uc3QgZGVmYXVsdEZvcm1hdHRlciA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiBnZXROdW1iZXJGb3JtYXR0ZXIodmFsdWVGb3JtYXQpLFxyXG4gICAgW3ZhbHVlRm9ybWF0XSxcclxuICApO1xyXG4gIGNvbnN0IGNvbHVtbkZvcm1hdHNBcnJheSA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiBPYmplY3QuZW50cmllcyhjb2x1bW5Gb3JtYXRzKSxcclxuICAgIFtjb2x1bW5Gb3JtYXRzXSxcclxuICApO1xyXG4gIGNvbnN0IGhhc0N1c3RvbU1ldHJpY0Zvcm1hdHRlcnMgPSBjb2x1bW5Gb3JtYXRzQXJyYXkubGVuZ3RoID4gMDtcclxuICBjb25zdCBtZXRyaWNGb3JtYXR0ZXJzID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIGhhc0N1c3RvbU1ldHJpY0Zvcm1hdHRlcnNcclxuICAgICAgICA/IHtcclxuICAgICAgICAgICAgW01FVFJJQ19LRVldOiBPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgICAgICAgY29sdW1uRm9ybWF0c0FycmF5Lm1hcCgoW21ldHJpYywgZm9ybWF0XSkgPT4gW1xyXG4gICAgICAgICAgICAgICAgbWV0cmljLFxyXG4gICAgICAgICAgICAgICAgZ2V0TnVtYmVyRm9ybWF0dGVyKGZvcm1hdCksXHJcbiAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICBbY29sdW1uRm9ybWF0c0FycmF5LCBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzXSxcclxuICApO1xyXG5cclxuICBjb25zdCBtZXRyaWNOYW1lcyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PlxyXG4gICAgICBtZXRyaWNzLm1hcCgobWV0cmljOiBzdHJpbmcgfCBBZGhvY01ldHJpYykgPT5cclxuICAgICAgICB0eXBlb2YgbWV0cmljID09PSAnc3RyaW5nJyA/IG1ldHJpYyA6IChtZXRyaWMubGFiZWwgYXMgc3RyaW5nKSxcclxuICAgICAgKSxcclxuICAgIFttZXRyaWNzXSxcclxuICApO1xyXG5cclxuICBjb25zdCB1bnBpdm90ZWREYXRhID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIGRhdGEucmVkdWNlKFxyXG4gICAgICAgIChhY2M6IFJlY29yZDxzdHJpbmcsIGFueT5bXSwgcmVjb3JkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBbXHJcbiAgICAgICAgICAuLi5hY2MsXHJcbiAgICAgICAgICAuLi5tZXRyaWNOYW1lc1xyXG4gICAgICAgICAgICAubWFwKChuYW1lOiBzdHJpbmcpID0+ICh7XHJcbiAgICAgICAgICAgICAgLi4ucmVjb3JkLFxyXG4gICAgICAgICAgICAgIFtNRVRSSUNfS0VZXTogbmFtZSxcclxuICAgICAgICAgICAgICB2YWx1ZTogcmVjb3JkW25hbWVdLFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLnZhbHVlICE9PSBudWxsKSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIFtdLFxyXG4gICAgICApLFxyXG4gICAgW2RhdGEsIG1ldHJpY05hbWVzXSxcclxuICApO1xyXG4gIGNvbnN0IGdyb3VwYnlSb3dzID0gdXNlTWVtbyhcclxuICAgICgpID0+IGdyb3VwYnlSb3dzUmF3Lm1hcChnZXRDb2x1bW5MYWJlbCksXHJcbiAgICBbZ3JvdXBieVJvd3NSYXddLFxyXG4gICk7XHJcbiAgY29uc3QgZ3JvdXBieUNvbHVtbnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gZ3JvdXBieUNvbHVtbnNSYXcubWFwKGdldENvbHVtbkxhYmVsKSxcclxuICAgIFtncm91cGJ5Q29sdW1uc1Jhd10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc29ydGVycyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiAoe1xyXG4gICAgICBbTUVUUklDX0tFWV06IHNvcnRBcyhtZXRyaWNOYW1lcyksXHJcbiAgICB9KSxcclxuICAgIFttZXRyaWNOYW1lc10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgW3Jvd3MsIGNvbHNdID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBsZXQgW3Jvd3NfLCBjb2xzX10gPSB0cmFuc3Bvc2VQaXZvdFxyXG4gICAgICA/IFtncm91cGJ5Q29sdW1ucywgZ3JvdXBieVJvd3NdXHJcbiAgICAgIDogW2dyb3VwYnlSb3dzLCBncm91cGJ5Q29sdW1uc107XHJcblxyXG4gICAgaWYgKG1ldHJpY3NMYXlvdXQgPT09IE1ldHJpY3NMYXlvdXRFbnVtLlJPV1MpIHtcclxuICAgICAgcm93c18gPSBjb21iaW5lTWV0cmljID8gWy4uLnJvd3NfLCBNRVRSSUNfS0VZXSA6IFtNRVRSSUNfS0VZLCAuLi5yb3dzX107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb2xzXyA9IGNvbWJpbmVNZXRyaWMgPyBbLi4uY29sc18sIE1FVFJJQ19LRVldIDogW01FVFJJQ19LRVksIC4uLmNvbHNfXTtcclxuICAgIH1cclxuICAgIHJldHVybiBbcm93c18sIGNvbHNfXTtcclxuICB9LCBbXHJcbiAgICBjb21iaW5lTWV0cmljLFxyXG4gICAgZ3JvdXBieUNvbHVtbnMsXHJcbiAgICBncm91cGJ5Um93cyxcclxuICAgIG1ldHJpY3NMYXlvdXQsXHJcbiAgICB0cmFuc3Bvc2VQaXZvdCxcclxuICBdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoZmlsdGVyczogU2VsZWN0ZWRGaWx0ZXJzVHlwZSkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gT2JqZWN0LmtleXMoZmlsdGVycyk7XHJcbiAgICAgIGNvbnN0IGdyb3VwYnkgPSBbLi4uZ3JvdXBieVJvd3NSYXcsIC4uLmdyb3VwYnlDb2x1bW5zUmF3XTtcclxuICAgICAgc2V0RGF0YU1hc2soe1xyXG4gICAgICAgIGV4dHJhRm9ybURhdGE6IHtcclxuICAgICAgICAgIGZpbHRlcnM6XHJcbiAgICAgICAgICAgIGZpbHRlcktleXMubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgPyB1bmRlZmluZWRcclxuICAgICAgICAgICAgICA6IGZpbHRlcktleXMubWFwKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGZpbHRlcnM/LltrZXldO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPVxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwYnkuZmluZChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1BoeXNpY2FsQ29sdW1uKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGhvY0NvbHVtbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pID8/ICcnO1xyXG4gICAgICAgICAgICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTIE5VTEwnLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wOiAnSU4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbDogdmFsIGFzIChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdLFxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmaWx0ZXJTdGF0ZToge1xyXG4gICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgIGZpbHRlcnMgJiYgT2JqZWN0LmtleXMoZmlsdGVycykubGVuZ3RoXHJcbiAgICAgICAgICAgICAgPyBPYmplY3QudmFsdWVzKGZpbHRlcnMpXHJcbiAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzOlxyXG4gICAgICAgICAgICBmaWx0ZXJzICYmIE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aCA/IGZpbHRlcnMgOiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIFtncm91cGJ5Q29sdW1uc1JhdywgZ3JvdXBieVJvd3NSYXcsIHNldERhdGFNYXNrXSxcclxuICApO1xyXG5cclxuICBjb25zdCB0b2dnbGVGaWx0ZXIgPSB1c2VDYWxsYmFjayhcclxuICAgIChcclxuICAgICAgZTogTW91c2VFdmVudCxcclxuICAgICAgdmFsdWU6IHN0cmluZyxcclxuICAgICAgZmlsdGVyczogRmlsdGVyVHlwZSxcclxuICAgICAgcGl2b3REYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxyXG4gICAgICBpc1N1YnRvdGFsOiBib29sZWFuLFxyXG4gICAgICBpc0dyYW5kVG90YWw6IGJvb2xlYW4sXHJcbiAgICApID0+IHtcclxuICAgICAgaWYgKGlzU3VidG90YWwgfHwgaXNHcmFuZFRvdGFsIHx8ICFlbWl0RmlsdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBpc0FjdGl2ZUZpbHRlclZhbHVlID0gKGtleTogc3RyaW5nLCB2YWw6IERhdGFSZWNvcmRWYWx1ZSkgPT5cclxuICAgICAgICAhIXNlbGVjdGVkRmlsdGVycyAmJiBzZWxlY3RlZEZpbHRlcnNba2V5XT8uaW5jbHVkZXModmFsKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnNDb3B5ID0geyAuLi5maWx0ZXJzIH07XHJcbiAgICAgIGRlbGV0ZSBmaWx0ZXJzQ29weVtNRVRSSUNfS0VZXTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnNFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZmlsdGVyc0NvcHkpO1xyXG4gICAgICBpZiAoZmlsdGVyc0VudHJpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBba2V5LCB2YWxdID0gZmlsdGVyc0VudHJpZXNbZmlsdGVyc0VudHJpZXMubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICBsZXQgdXBkYXRlZEZpbHRlcnMgPSB7IC4uLihzZWxlY3RlZEZpbHRlcnMgfHwge30pIH07XHJcbiAgICAgIC8vIG11bHRpIHNlbGVjdFxyXG4gICAgICAvLyBpZiAoc2VsZWN0ZWRGaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWwpKSB7XHJcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IHNlbGVjdGVkRmlsdGVyc1trZXldLmZpbHRlcigoeDogRGF0YVJlY29yZFZhbHVlKSA9PiB4ICE9PSB2YWwpO1xyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAvLyAgIHVwZGF0ZWRGaWx0ZXJzW2tleV0gPSBbLi4uKHNlbGVjdGVkRmlsdGVycz8uW2tleV0gfHwgW10pLCB2YWxdO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vIHNpbmdsZSBzZWxlY3RcclxuICAgICAgaWYgKHNlbGVjdGVkRmlsdGVycyAmJiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSkge1xyXG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzID0ge307XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBkYXRlZEZpbHRlcnMgPSB7XHJcbiAgICAgICAgICBba2V5XTogW3ZhbF0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgQXJyYXkuaXNBcnJheSh1cGRhdGVkRmlsdGVyc1trZXldKSAmJlxyXG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzW2tleV0ubGVuZ3RoID09PSAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGRlbGV0ZSB1cGRhdGVkRmlsdGVyc1trZXldO1xyXG4gICAgICB9XHJcbiAgICAgIGhhbmRsZUNoYW5nZSh1cGRhdGVkRmlsdGVycyk7XHJcbiAgICB9LFxyXG4gICAgW2VtaXRGaWx0ZXIsIHNlbGVjdGVkRmlsdGVycywgaGFuZGxlQ2hhbmdlXSxcclxuICApO1xyXG5cclxuICBjb25zdCB0YWJsZU9wdGlvbnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gKHtcclxuICAgICAgY2xpY2tSb3dIZWFkZXJDYWxsYmFjazogdG9nZ2xlRmlsdGVyLFxyXG4gICAgICBjbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrOiB0b2dnbGVGaWx0ZXIsXHJcbiAgICAgIGNvbFRvdGFscyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXI6IGVtaXRGaWx0ZXIsXHJcbiAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHM6IHNlbGVjdGVkRmlsdGVycyxcclxuICAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwczogW01FVFJJQ19LRVldLFxyXG4gICAgICBjZWxsQ29sb3JGb3JtYXR0ZXJzOiB7IFtNRVRSSUNfS0VZXTogbWV0cmljQ29sb3JGb3JtYXR0ZXJzIH0sXHJcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxyXG4gICAgfSksXHJcbiAgICBbXHJcbiAgICAgIGNvbFRvdGFscyxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICAgIGVtaXRGaWx0ZXIsXHJcbiAgICAgIG1ldHJpY0NvbG9yRm9ybWF0dGVycyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICBzZWxlY3RlZEZpbHRlcnMsXHJcbiAgICAgIHRvZ2dsZUZpbHRlcixcclxuICAgIF0sXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc3VidG90YWxPcHRpb25zID0gdXNlTWVtbyhcclxuICAgICgpID0+ICh7XHJcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheTogeyBkaXNwbGF5T25Ub3A6IGNvbFN1YnRvdGFsUG9zaXRpb24gfSxcclxuICAgICAgcm93U3VidG90YWxEaXNwbGF5OiB7IGRpc3BsYXlPblRvcDogcm93U3VidG90YWxQb3NpdGlvbiB9LFxyXG4gICAgICBhcnJvd0NvbGxhcHNlZDogPFBsdXNTcXVhcmVPdXRsaW5lZCBzdHlsZT17aWNvblN0eWxlfSAvPixcclxuICAgICAgYXJyb3dFeHBhbmRlZDogPE1pbnVzU3F1YXJlT3V0bGluZWQgc3R5bGU9e2ljb25TdHlsZX0gLz4sXHJcbiAgICB9KSxcclxuICAgIFtjb2xTdWJ0b3RhbFBvc2l0aW9uLCByb3dTdWJ0b3RhbFBvc2l0aW9uXSxcclxuICApO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFN0eWxlcyBoZWlnaHQ9e2hlaWdodH0gd2lkdGg9e3dpZHRofSBtYXJnaW49e3RoZW1lLmdyaWRVbml0ICogNH0+XHJcbiAgICAgIDxQaXZvdFRhYmxlV3JhcHBlcj5cclxuICAgICAgICA8UGl2b3RUYWJsZVxyXG4gICAgICAgICAgZGF0YT17dW5waXZvdGVkRGF0YX1cclxuICAgICAgICAgIHJvd3M9e3Jvd3N9XHJcbiAgICAgICAgICBjb2xzPXtjb2xzfVxyXG4gICAgICAgICAgYWdncmVnYXRvcnNGYWN0b3J5PXthZ2dyZWdhdG9yc0ZhY3Rvcnl9XHJcbiAgICAgICAgICBkZWZhdWx0Rm9ybWF0dGVyPXtkZWZhdWx0Rm9ybWF0dGVyfVxyXG4gICAgICAgICAgY3VzdG9tRm9ybWF0dGVycz17bWV0cmljRm9ybWF0dGVyc31cclxuICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lPXthZ2dyZWdhdGVGdW5jdGlvbn1cclxuICAgICAgICAgIHZhbHM9e3ZhbHN9XHJcbiAgICAgICAgICBjb2xPcmRlcj17Y29sT3JkZXJ9XHJcbiAgICAgICAgICByb3dPcmRlcj17cm93T3JkZXJ9XHJcbiAgICAgICAgICBzb3J0ZXJzPXtzb3J0ZXJzfVxyXG4gICAgICAgICAgdGFibGVPcHRpb25zPXt0YWJsZU9wdGlvbnN9XHJcbiAgICAgICAgICBzdWJ0b3RhbE9wdGlvbnM9e3N1YnRvdGFsT3B0aW9uc31cclxuICAgICAgICAgIG5hbWVzTWFwcGluZz17dmVyYm9zZU1hcH1cclxuICAgICAgICAvPlxyXG4gICAgICA8L1Bpdm90VGFibGVXcmFwcGVyPlxyXG4gICAgPC9TdHlsZXM+XHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\n");

/***/ })

}]);